@model Arasan.Models.GRN

@{
    ViewData["Title"] = "  GRN ";
   
}   
<div class="row wrapper border-bottom page-heading">
      <div class="col-lg-12">
  <style>
        .newwidth{ width:90px; }
    </style>
        <ol class="breadcrumb">
          <li> <a href="@Url.Action("PurchaseDash", "Home")">Home</a> </li>
          <li> <a>Purchase</a> </li>
          <li class="active"> <strong> GRN </strong> </li>
        </ol>
      </div>
    </div>
     <div class="wrapper-content ">
        <div class="row">
         <div class="col-lg-12">
          <div class="ibox float-e-margins">
            <div class="widgets-container">
              <h5 style="font-size:14px">GRN</h5>
              <hr>
              
                                          @using (Html.BeginForm("GRN", "GRN", FormMethod.Post))
                        {
                            @Html.AntiForgeryToken()
              <form>
		@*	  <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                            
                                                <label for="inputName3" class="col-sm-4 control-label">Branch<label class="Mandatory"></label></label>
                                                <div class="col-sm-8">
                                            @Html.DropDownListFor(C => C.Branch, Model.Brlst, new { @id = "ddlBranch", @Class = "form-control _select", @TabIndex = 1 ,@disabled="disabled"})<br />
                                                </div>
                                            </div>
                                        </div>
                                       
                                    </div>*@
									
									 <div class="row">
                                        <div class="col-md-4">
                                            <div class="form-group">
                                            
                                                <label for="inputName3" class="col-sm-4 control-label">GRN No.<label class="Mandatory"></label></label>
                                                <div class="col-sm-8">
                                                     @Html.TextBoxFor(C => C.GRNNo, new { @id = "GRNNo", @class = "form-control", @TabIndex = 2 ,@readonly=true})
                                            @Html.HiddenFor(C => C.ID)
                                            @Html.HiddenFor(C => C.BranchID)
                                            @Html.HiddenFor(C => C.Supplierid)
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label for="inputName3" class="col-sm-4 control-label">GRN Date<label class="Mandatory"></label></label>
                                               <div class="col-sm-8">
                                                     @Html.TextBoxFor(C => C.GRNdate, new { @id = "GRNdate", @class = "form-control", @TabIndex = 2 ,@readonly=true})<br/>
                                                </div>
												
                                               
                                            </div>
                                        </div>
                                          <div class="col-md-4">
                                            <div class="form-group">
                                            
                                                <label for="inputName3" class="col-sm-4 control-label">Currency<label class="Mandatory"></label></label>
                                                <div class="col-sm-8">
                                                 @Html.DropDownListFor(C => C.Cur, Model.Curlst, new { @id = "ddlCur", @Class = "form-control _select", @TabIndex = 1 ,@disabled="disabled"})
                                                </div>
                                            </div>
                                        </div>
                                    </div>
               <div class="row">
                                      
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label for="inputName3" class="col-sm-4 control-label">Exchange Rate<label class="Mandatory"></label></label>
                                              
                                                      <div class="col-sm-8">
												   @Html.TextBoxFor(C => C.ExRate, new { @id = "ExRate", @class = "form-control", @TabIndex = 2 })<br/>
												</div>
                                               
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                            
                                                <label for="inputName3" class="col-sm-4 control-label">Supplier Inv. No.<label class="Mandatory"></label></label>
                                                <div class="col-sm-8">
                                            @Html.TextBoxFor(C => C.RefNo, new { @id = "RefNo", @class = "form-control", @TabIndex = 2 })<br />
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label for="inputName3" class="col-sm-4 control-label">Supplier Inv. Date<label class="Mandatory"></label></label>
                                              
                                                     <div class="input-group date form_date col-sm-8" data-date="" data-date-format="dd-M-yyyy" >
                                                         @Html.TextBoxFor(C => C.RefDate, new { @id = "RefDate", @class = "form-control", @TabIndex = 2,@size="32",@readonly=true })
														<span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span> <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span><br/>
													</div>
                                               
                                            </div>
                                        </div>
                                    </div>
									 <div class="row">
                                       
                                       <div class="col-md-4">
                                            <div class="form-group">
                                            
                                                <label for="inputName3" class="col-sm-4 control-label">Party Id<label class="Mandatory"></label></label>
                                                <div class="col-sm-8">
                                                        @Html.DropDownListFor(C => C.Supplier, Model.Suplst, new { @id = "ddlSupplier", @Class = "form-control _select", @TabIndex = 1 ,@disabled="disabled"})
                                                </div>
                                            </div>
                                        </div>
										<div class="col-md-4">
                                            <div class="form-group">
                                            
                                                <label for="inputName3" class="col-sm-4 control-label">Address<label class="Mandatory"></label></label>
                                                <div class="col-sm-8">
                                            @Html.TextBoxFor(C => C.address, new { @id = "address", @class = "form-control", @TabIndex = 2 })<br />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                   
									
									
									 <div style="height:30px;"></div>
			 <div class="row">
			
			 
          <div class="col-lg-12" style="overflow-x:scroll; min-width:300px; min-height:200px;">
           
                    <table class="table table-striped table-hover">
                      <thead>
                        <tr>
                        @* <th>   Item Group</th>*@
                          <th> Item </th>
                          <th> Description </th>
                          <th>Unit</th>
                          <th> Conversion. Factor </th>
                        <th> Order Qty </th>
                      @* <th> Pend. Qty </th>*@
                       <th> Bill Qty </th>
                       <th> Cenversion Qty </th>
                       <th> Recvd. Qty (Good)</th>
                         <th>  Recvd. Qty (Defect) </th>
                                 <th>Rate </th>
                                <th> Amount</th>
                            <th> Disc amount</th>
                              <th> Freight charges</th>
                              <th> Packing charges</th>
                            <th> Cost Rate</th>
                              <th>CGSTP</th>
                               <th>SGSTP</th>
                                <th>IGSTP</th>
                                 <th>CGST</th>
                                  <th>SGST</th>
                                   <th>IGST</th>
                                    <th>Total Amount</th>
                                   @*<th>LOT NO.</th>*@
                                      <th>Purchase Type</th>
                                       <th>Manufacturing Date</th>
                                        <th>Expiry Date</th>
                        </tr>
                      </thead>
                      <tbody id="tbBooks">
                        @{

                                                            int i = 0;
                                                            int j = 1;
                                                            foreach (var item in Model.PoItem.ToList())
                                                            {
                                                                                                                                                            <tr id="trBook@(i)" class="chkitemlst" style="height: 30px;border-bottom: 1px dashed #ddd;">
                                                                                                                                                          @*  <td>
                                                            @Html.DropDownListFor(o => o.PoItem[i].ItemGroupId, Model.PoItem[i].ItemGrouplst, "Please Select", new { @class = "form-control _select newcss", @id = "ddlItemGrp" + i, style = "width: 170px;", onchange = "Grup_Change(this.value," + i + ")",disabled="disabled" })
                                                                                                                                                        </td>*@
                                                                                                                                                        <td>

                                                                                                                                                            @Html.DropDownListFor(o => o.PoItem[i].ItemId, Model.PoItem[i].Itemlst, "Please Select", new { @class = "form-control _select newcss", @id = "ddlItem" + i, style = "width: 170px;", onchange = "changeItem(this.value," + i + ")",disabled="disabled" })
                                                                                                                                                        @Html.HiddenFor(o => o.PoItem[i].saveItemId)
                                                            @Html.HiddenFor(o => o.PoItem[i].grndetid)
                                                                                                                                                            </td>
                                                                                                                                                         <td>
                                                                                                                                                            @Html.TextBoxFor(o => o.PoItem[i].Desc, new { @id = "txtDesc" + i, @class = "form-control", style = "width: 200px;", @readonly = "readonly"})
                                                                                                                                                        </td>
                                                                                                                                                         <td>
                                                                                                                                                            @Html.TextBoxFor(o => o.PoItem[i].Unit, new { @id = "txtUnit" + i, @class = "form-control", style = "width: 60px;" , @readonly = "readonly"})
                                                                                                                                                        </td>
                                                                                                                                                         <td>
                                                                                                                                                            @Html.TextBoxFor(o => o.PoItem[i].Conversionfactor, new { @id = "txtConversionfactor" + i, @class = "form-control", style = "width: 70px;", @readonly = "readonly" })
                                                                                                                                                        </td>
                                                                                                                                                         <td>
                                                                                                                                                            @Html.TextBoxFor(o => o.PoItem[i].Quantity, new { @id = "txtQuantity" + i, @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 100px;text-align:right", @onkeyup = "changeQty(this," + i + ")", @readonly = "readonly"})
                                                                                                                                                        </td>
                                                                                                                                                         @*<td>
                                                                                                                                                            @Html.TextBoxFor(o => o.PoItem[i].PendingQty, new { @id = "txtPendingQty" + i, @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 100px;text-align:right", @onkeyup = "changeQty(this," + i + ")", @readonly = "readonly"})
                                                                                                                                                        </td>*@
                                                                                                                                                         <td>
                                                                                                                                                            @Html.TextBoxFor(o => o.PoItem[i].BillQty, new { @id = "txtBillQty" + i, @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 100px;text-align:right", @onkeyup = "changeQty(this," + i + ")"})
                                                                                                                                                        </td>
                                                                                                                                                         <td>
                                                            @Html.TextBoxFor(o => o.PoItem[i].ConvQty, new { @id = "txtConvQty" + i, @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 100px;text-align:right", @onkeyup = "changeQty(this," + i + ")"})
                                                                                                                                                        </td>
                                                                                                                                                         <td>
                                                                                                                                                            @Html.TextBoxFor(o => o.PoItem[i].Goodqty, new { @id = "txtGoodqty" + i, @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 100px;text-align:right"})
                                                                                                                                                        </td>
                                                                                                                                                         <td>
                                                            @Html.TextBoxFor(o => o.PoItem[i].DamageQty, new { @id = "txtDamageQty" + i, @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 100px;text-align:right",@onkeyup = "changeQty(this," + i + ")"})
                                                                                                                                                        </td>
                                                                                                                                                         <td>
                                                                                                                                                            @Html.TextBoxFor(o => o.PoItem[i].rate, new { @id = "txtrate" + i, @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 100px;text-align:right", @onkeyup = "changeQty(this," + i + ")" })
                                                                                                                                                        </td>
                                                                                                                                                         <td>
                                                                                                                                                          @Html.HiddenFor(o => o.PoItem[i].Isvalid, new { @id = "Isvalid" + i }) @Html.HiddenFor(o => o.PoItem[i].LOTYN, new { @id = "LOTYN" + i })
                                                                                                                                                            @Html.TextBoxFor(o => o.PoItem[i].Amount, new { @id = "txtAmount" + i, @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 100px;text-align:right",@readonly="readonly"})
                                                                                                                                                        </td>
                                                        @* <td>
                                                                                                                                                            @Html.TextBoxFor(o => o.PoItem[i].DiscPer, new { @id = "txtDiscPer" + i, @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 100px;text-align:right", @onkeyup = "changeQty(this," + i + ")" })
                                            </td>*@
                                                                                                                                                         <td>
                                                                                                                                                            @Html.TextBoxFor(o => o.PoItem[i].DiscAmt, new { @id = "txtDiscAmt" + i, @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 100px;text-align:right", @onkeyup = "changeQty(this," + i + ")" })
                                                                                                                                                        </td>
                                                                                                                                                        <td>
                                                                                                                                                            @Html.TextBoxFor(o => o.PoItem[i].FrieghtAmt, new { @id = "txtFrieghtAmt" + i, @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 100px;text-align:right", @onkeyup = "changeQty(this," + i + ")" })
                                                                                                                                                        </td>
                                                                                                                                                        <td>
                                                                                                                                                            @Html.TextBoxFor(o => o.PoItem[i].PackingAmt, new { @id = "txtPackingAmt" + i, @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 100px;text-align:right", @onkeyup = "changeQty(this," + i + ")" })
                                                                                                                                                        </td>
                                                                                                                                                       <td>
                                                                                                                                                            @Html.TextBoxFor(o => o.PoItem[i].CostRate, new { @id = "txtCostRate" + i, @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 100px;text-align:right" })
                                                                                                                                                        </td>
                                                                                                                                                        @*    <td>
                                                                                                                                                            @Html.TextBoxFor(o => o.PoItem[i].AcessValue, new { @id = "txtAcessValue" + i, @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 100px;text-align:right" })
                                                                                                                                                        </td> *@
                                                                                                                                                         <td>
                                                                                                                                                            @Html.TextBoxFor(o => o.PoItem[i].CGSTPer, new { @id = "txtCGSTPer" + i, @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 70px;text-align:right", @onkeyup = "changeQty(this," + i + ")" , @readonly = "readonly"})
                                                                                                                                                        </td>
                                                                                                                                                          <td>
                                                                                                                                                            @Html.TextBoxFor(o => o.PoItem[i].SGSTPer, new { @id = "txtSGSTPer" + i, @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 70px;text-align:right", @onkeyup = "changeQty(this," + i + ")" , @readonly = "readonly"})
                                                                                                                                                        </td>
                                                                                                                                                          <td>
                                                                                                                                                            @Html.TextBoxFor(o => o.PoItem[i].IGSTPer, new { @id = "txtIGSTPer" + i, @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 70px;text-align:right", @onkeyup = "changeQty(this," + i + ")", @readonly = "readonly" })
                                                                                                                                                        </td>
                                                                                                                                                          <td>
                                                                                                                                                            @Html.TextBoxFor(o => o.PoItem[i].CGSTAmt, new { @id = "txtCGSTAmt" + i, @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 100px;text-align:right", @onkeyup = "changeQty(this," + i + ")" , @readonly = "readonly"})
                                                                                                                                                        </td>
                                                                                                                                                        
                                                                                                                                                          <td>
                                                                                                                                                            @Html.TextBoxFor(o => o.PoItem[i].SGSTAmt, new { @id = "txtSGSTAmt" + i, @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 100px;text-align:right", @onkeyup = "changeQty(this," + i + ")" , @readonly = "readonly"})
                                                                                                                                                        </td>
                                                                                                                                                        
                                                                                                                                                          <td>
                                                                                                                                                            @Html.TextBoxFor(o => o.PoItem[i].IGSTAmt, new { @id = "txtIGSTAmt" + i, @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 100px;text-align:right", @onkeyup = "changeQty(this," + i + ")" , @readonly = "readonly"})
                                                                                                                                                        </td>
                                                                                                                                                         <td>
                                                                                                                                                            @Html.TextBoxFor(o => o.PoItem[i].TotalAmount, new { @id = "txtTotalAmount" + i, @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 100px;text-align:right", @onkeyup = "changeQty(this," + i + ")" , @readonly = "readonly"})
                                                                                                                                                        </td>
                                                       @* @if (item.LOTYN == "YES")
                                                        {
                                                            <td> @Html.TextBoxFor(o => o.PoItem[i].Lotno, new { @id = "txtLotno" + i, @class = "form-control", style = "width: 150px;" })</td>
                                                        }
                                                        else
                                                        {
                                                            <td></td>
                                                        }*@


                                                                                                                         <td>
                                                                                                                                                            @Html.DropDownListFor(o => o.PoItem[i].Purtype, Model.PoItem[i].PURLst, "Please Select", new { @class = "form-control _select newcss", @id = "ddlPurtype" + i, style = "width: 170px;"})
                                                                                                                                                        </td>
                                                        @if (item.EXPYN == "YES")
                                                        {
                                                                                                                                                        <td>  <div class="input-group date form_date col-sm-8" data-date="" data-date-format="dd-M-yyyy" >
                                                                                                                   @Html.TextBoxFor(o => o.PoItem[i].mdate, new { @id = "txtmdate" + i, @class = "form-control", style = "width: 100px;",@readonly=true}) 
                                                                                                           <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span> <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                                                                                                        </div> </td>
                                                                                                                                                        <td>  <div class="input-group date form_date col-sm-8" data-date="" data-date-format="dd-M-yyyy" >
                                                                                                                   @Html.TextBoxFor(o => o.PoItem[i].edate, new { @id = "txtedate" + i, @class = "form-control", style = "width: 100px;",@readonly=true}) 
                                                                                                           <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span> <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                                                                </div> </td>
                                                        }
                                                        else
                                                        {
                                                            <td></td>
                                                            <td></td>
                                                        }
                                                        @*   <td>
                                                                                                               
                                                                                                                <img onclick="removeRow(@(i));" src="../Images/delete.png" style="cursor:pointer" /> <input name="EnqLst.Index" type="hidden" value="@(i)" />
                                                                                                            </td>*@
                                                                                                                                                        </tr>


                                                             i = i + 1;
                                                             j = j + 1;
                                                            }
                                                        }
                      </tbody>
                    </table>
                 
          </div>
        </div>
                         <div class="row">
                               <div class="col-md-4" style="overflow-x:scroll; min-width:300px; min-height:300px;">

                                    @* <div class="ibox float-e-margins">*@

                                    <!-- / ibox-title -->
                                    @* <div id="demo3" class="ibox-content collapse in">
                                <div class="borderedTable">
                                <div class="table-scrollable">*@
                                    <table class="table table-striped table-hover" id="dataTable">
                                        <thead>
                                           
                                        </thead>
                                        <tbody id="tbBooks">
                                            @{



                                                <tr>

                                                    <th>GROSS</th>
                                                    <td>
                                                        @Html.TextBoxFor(o => o.Gross, new { @id = "txtGross"  , @class = "form-control", style = "width: 150px;text-align:right", @readonly = "readonly"})
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <th>DISCOUNT</th>
                                                    <td>
                                                        @Html.TextBoxFor(o => o. Disc, new { @id = "txtDisc"  , @class = "form-control", style = "width: 150px;text-align:right" , @onkeyup = "changeTot(this)"})
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <th>Fright</th>
                                                    <td>

                                                        @Html.TextBoxFor(o => o. Frieghtcharge, new { @id = "txtFrieghtcharge"  , @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 150px;text-align:right", @onkeyup = "changeTot(this)"})
                                                    </td>
                                                </tr>
                                                 <tr>
                                                    <th>Packing and Forwarding ( + )</th>
                                                    <td>

                                                        @Html.TextBoxFor(o => o. Packingcharges, new { @id = "txtPackingcharges"  , @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 150px;text-align:right", @onkeyup = "changeTot(this)"})
                                                    </td>
                                                </tr>
                                                // <tr>
                                                //    <th>Other Charges ( + )</th>
                                                //    <td>

                                                //        @Html.TextBoxFor(o => o. Othercharges, new { @id = "txtOthercharges"  , @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 150px;text-align:right",@onkeyup = "changeQty(this)"})
                                                //    </td>
                                                //</tr>
                                                // <tr>
                                                //    <th>Other Deductions ( - )</th>
                                                //    <td>

                                                //        @Html.TextBoxFor(o => o. otherdeduction, new { @id = "txtotherdeduction"  , @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 150px;text-align:right",@onkeyup = "changeQty(this)"})
                                                //    </td>
                                                //</tr>
                                                //<tr>
                                                //    <th>Round Off ( - )</th>
                                                //    <td>

                                                //        @Html.TextBoxFor(o => o. Roundminus, new { @id = "txtRoundminus"  , @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 150px;text-align:right",@onkeyup = "changeQty(this)"})
                                                //    </td>
                                                //</tr>
                                                <tr>
                                                    <th>CGST @Html.DisplayFor(o => o. CGSTDISP) %</th>
                                                    <td>

                                                        @Html.TextBoxFor(o => o. CGST, new { @id = "txtCGST"  , @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 150px;text-align:right",@readonly="readonly"})
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <th>SGST @Html.DisplayFor(o => o. SGSTDISP) %</th>
                                                    <td>
                                                        @Html.TextBoxFor(o => o. SGST, new { @id = "txtSGST"  , @class = "form-control", style = "width: 150px;text-align:right", @readonly = "readonly" })
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <th>IGST @Html.DisplayFor(o => o. IGSTDISP) %</th>
                                                    <td>
                                                        @Html.TextBoxFor(o => o. IGST, new { @id = "txtIGST"  , @class = "form-control", style = "width: 150px;text-align:right", @readonly = "readonly" })
                                                    </td>
                                                </tr>
                                                
                                                <tr>
                                                    <th> ROUND OFF</th>
                                                    <td>
                                                        @Html.TextBoxFor(o => o. Round, new { @id = "txtRound"  , @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 150px;text-align:right"  , @onkeyup = "changeTot(this)"})
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <th> TOTAL </th>
                                                    <td>
                                                    <input type="hidden" id="hidnet" /> 
                                                        @Html.TextBoxFor(o => o. Net, new { @id = "txtNet"  , @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 150px;text-align:right",@readonly="readonly"})
                                                    </td>


                                                </tr>

                                            }


                                        </tbody>
                                    </table>
                               </div>
                                <div class="col-md-8">
                                    <div class="tabs-container">
                                        <ul class="nav nav-tabs">
                                           @*<li class="active"><a href="#tab-1" data-toggle="tab">Despatch Address</a></li>*@
                                            <li class="active"><a href="#tab-1" data-toggle="tab">Despatch Address</a></li>

                                        </ul>
                                        <div class="tab-content">


                                            <div class="tab-pane active" id="tab-1">
                                                 
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <div class="form-group">

                                                            <br /> <label for="inputName3" class="col-sm-2 control-label">Truck No<label class="Mandatory"></label></label>
                                                            <div class="col-sm-10">
                                                                @Html.TextBoxFor(C => C.truckno, new { @id = "txttruckno", @class = "form-control", @TabIndex = 1,@readonly="true" })
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-12">
                                                        <div class="form-group">

                                                            <br /> <label for="inputName3" class="col-sm-2 control-label">Narration<label class="Mandatory"></label></label>
                                                            <div class="col-sm-10">
                                                                @Html.TextAreaFor(C => C.Narration, new { @id = "txtNarration", @class = "form-control",@value="Invoice to", @TabIndex = 1 })
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="form-group">

                                                            <br /> <label for="inputName3" class="col-sm-4 control-label">Transporter<label class="Mandatory"></label></label>
                                                            <div class="col-sm-8">

                                                                @Html.TextBoxFor(C => C.drivername, new { @id = "txtdrivername", @class = "form-control", @TabIndex = 1 ,onkeydown = "return isNumeric2(event.keyCode,this.value)"})
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <br /> <label for="inputName3" class="col-sm-4 control-label">LR.No<label class="Mandatory"></label></label>

                                                            <div class="col-sm-8">
                                                                @Html.TextBoxFor(C => C.LRno, new { @id = "txtLRno", @class = "form-control", @TabIndex = 1 ,onkeydown = "return isNumeric2(event.keyCode,this.value)"})
                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="form-group">

                                                            <br /><label for="inputName3" class="col-sm-4 control-label">LR.Date<label class="Mandatory"></label></label>
                                                           <div class="input-group date form_date col-sm-8" data-date="" data-date-format="dd-M-yyyy" >
                                            @Html.TextBoxFor(C => C.LRdate, new { @id = "LRdate", @class = "form-control", @TabIndex = 2,@size="32",@readonly=true })
														<span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span> <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
													</div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <br />  <label for="inputName3" class="col-sm-4 control-label">Place Of Dispatch<label class="Mandatory"></label></label>

                                                            <div class="col-sm-8">
                                                                @Html.TextBoxFor(C => C.dispatchname, new { @id = "txtdispatchname", @class = "form-control", @TabIndex = 1 })
                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                               @*1st tab*@

                                            </div>
                                             
                                        </div>
                                    </div>
                                </div>
                         </div>

		  @*<div style="height:30px;"></div>
									<div class="row">
                                       
                                      <div class="col-md-6">
                                            <div class="form-group">
                                            
                                                <label for="inputName3" class="col-sm-4 control-label">Packing and Forwarding ( + ) <label class="Mandatory"></label></label>
                                                <div class="col-sm-8">
                                                     @Html.TextBoxFor(C => C.Packingcharges, new { @id = "txtPackingcharges", @class = "form-control", @TabIndex = 2,onkeydown = "return isNumeric2(event.keyCode,this.value)" , @onkeyup = "changeTot(this)"})
                                                </div>
                                            </div>
                                        </div>
										<div class="col-md-6">
                                            <div class="form-group">
                                            
                                                <label for="inputName3" class="col-sm-4 control-label">Freight Charges ( + ) <label class="Mandatory"></label></label>
                                                <div class="col-sm-8">
                                                   @Html.TextBoxFor(C => C.Frieghtcharge, new { @id = "txtFrieghtcharge", @class = "form-control", @TabIndex = 2, onkeydown = "return isNumeric2(event.keyCode,this.value)" , @onkeyup = "changeTot(this)"})
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                     <div style="height:30px;"></div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">

                                    <label for="inputName3" class="col-sm-4 control-label">Other Charges ( + )<label class="Mandatory"></label></label>
                                    <div class="col-sm-8">
                                            @Html.TextBoxFor(C => C.Othercharges, new { @id = "txtOthercharges", @class = "form-control", @TabIndex = 2,onkeydown = "return isNumeric2(event.keyCode,this.value)"  , @onkeyup = "changeTot(this)"})
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="inputName3" class="col-sm-4 control-label">Round Off ( + )<label class="Mandatory"></label></label>

                                    <div class="col-sm-8">
                                            @Html.TextBoxFor(C => C.Round, new { @id = "txtRound", @class = "form-control", @TabIndex = 2 ,onkeydown = "return isNumeric2(event.keyCode,this.value)" , @onkeyup = "changeTot(this)"})
                                    </div>

                                </div>
                            </div>
                        </div>
                         <div style="height:30px;"></div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">

                                    <label for="inputName3" class="col-sm-4 control-label">Other Deductions ( - )<label class="Mandatory"></label></label>
                                    <div class="col-sm-8">
                                            @Html.TextBoxFor(C => C.otherdeduction, new { @id = "txtotherdeduction", @class = "form-control", @TabIndex = 2,onkeydown = "return isNumeric2(event.keyCode,this.value)"  , @onkeyup = "changeTot(this)"})
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="inputName3" class="col-sm-4 control-label">Round Off ( - )<label class="Mandatory"></label></label>

                                    <div class="col-sm-8">
                                            @Html.TextBoxFor(C => C.Roundminus, new { @id = "txtRoundminus", @class = "form-control", @TabIndex = 2 ,onkeydown = "return isNumeric2(event.keyCode,this.value)" , @onkeyup = "changeTot(this)"})
                                    </div>

                                </div>
                            </div>
                        </div>
									<div style="height:30px;"></div>
									 <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                            
                                                <label for="inputName3" class="col-sm-4 control-label">Gross<label class="Mandatory"></label></label>
                                                <div class="col-sm-8">
                                                    @Html.TextBoxFor(C => C.Gross, new { @id = "txtGross", @class = "form-control", @TabIndex = 2 ,onkeydown = "return isNumeric2(event.keyCode,this.value)",@readonly=true})
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label for="inputName3" class="col-sm-4 control-label">Net<label class="Mandatory"></label></label>
                                              
                                                      <div class="col-sm-8">
                                                        <input type="hidden" id="hidnet" /> 
												 @Html.TextBoxFor(C => C.Net, new { @id = "txtNet", @class = "form-control", @TabIndex = 2,onkeydown = "return isNumeric2(event.keyCode,this.value)" ,@readonly=true})
												</div>
                                               
                                            </div>
                                        </div>
                                    </div>*@
									
									@*<div style="height:30px;"></div>
									 <div class="row">
                                        <div class="col-md-12">
                                            <div class="form-group">
                                            
                                                <label for="inputName3" class="col-sm-2 control-label">Amount In Words<label class="Mandatory"></label></label>
                                                <div class="col-sm-10">
                                                    <input class="form-control" id="inputEmail3" placeholder="" type="text">
                                                </div>
                                            </div>
                                        </div>
                                       
                                    </div>*@
									
                                    
                                       
								@*	<div style="height:30px;"></div>
									 <div class="row">
                                        <div class="col-md-12">
                                            <div class="form-group">
                                            
                                                <label for="inputName3" class="col-sm-2 control-label">Narration<label class="Mandatory"></label></label>
                                                <div class="col-sm-10">
                                                    @Html.TextAreaFor(C => C.Narration, new { @id = "txtNarration", @class = "form-control", @TabIndex = 2 })
                                                </div>
                                            </div>
                                        </div>
                                        
                                    </div>

                                     <div style="height:30px;"></div>
                                          <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                            
                                                <label for="inputName3" class="col-sm-4 control-label">Truck No.<label class="Mandatory"></label></label>
                                                <div class="col-sm-8">
                                                    @Html.TextBoxFor(C => C.truckno, new { @id = "txttruckno", @class = "form-control", @TabIndex = 2 })
                                                </div>
                                            </div>
                                        </div>
                                         <div class="col-md-6">
                                            <div class="form-group">
                                            
                                                <label for="inputName3" class="col-sm-4 control-label">Transporter<label class="Mandatory"></label></label>
                                                <div class="col-sm-8">
                                                     @Html.TextBoxFor(C => C.drivername, new { @id = "txtdrivername", @class = "form-control", @TabIndex = 2 })
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                     <div style="height:30px;"></div>
                                          <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                            
                                                <label for="inputName3" class="col-sm-4 control-label">LR. No.<label class="Mandatory"></label></label>
                                                <div class="col-sm-8">
                                                      @Html.TextBoxFor(C => C.LRno, new { @id = "txtLRno", @class = "form-control", @TabIndex = 2 })
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label for="inputName3" class="col-sm-4 control-label">LR.Date<label class="Mandatory"></label></label>
                                              
                                                    <div class="input-group date form_date col-sm-8" data-date="" data-date-format="dd-M-yyyy" >
                                            @Html.TextBoxFor(C => C.LRdate, new { @id = "LRdate", @class = "form-control", @TabIndex = 2,@size="32",@readonly=true })
														<span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span> <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
													</div>
                                               
                                            </div>
                                        </div>
                                    </div>
                                    <div style="height:30px;"></div>
                                          <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label for="inputName3" class="col-sm-4 control-label">Place Of Dispatch<label class="Mandatory"></label></label>
                                              
                                                      <div class="col-sm-8">
												   @Html.TextBoxFor(C => C.dispatchname, new { @id = "txtdispatchname", @class = "form-control", @TabIndex = 2 })
												</div>
                                               
                                            </div>
                                        </div>
                                    </div>*@

									<div style="height:30px;"></div>
                <button type="submit" class="btn aqua m-t-xs bottom15-xs">Submit</button>
				  <button class="btn btn-danger" type="button" causesvalidation="false" onclick="location.href='@Url.Action("ListGRN", "GRN")'">Cancel</button>
              </form>
              }
            </div>
          </div>
        </div>
         
        </div>
      </div>
<script>
    $(function () {
        $('._select').select2();
    });
      $('.form_date').datetimepicker({
     //   language:  'fr',
        weekStart: 1,
        todayBtn:  1,
    autoclose: 1,
    todayHighlight: 1,
    startView: 2,
    minView: 2,
    forceParse: 0
    });
    function DamageQty(_this, i) {
        var dmqty = document.getElementById("txtDamageQty" + i).value;
        var totqty = document.getElementById("txtQuantity" + i).value;
        if (dmqty == "")
           dmqty = 0;

        if (totqty == "")
            totqty = 0;
        var billqty = eval(totqty) - eval(dmqty);
        document.getElementById("txtBillQty" + i).value = billqty;

    }
     function changeQty(_this, i) {
                try {

   
                       var j = 0;
                    var qty = 0;
                    var tot = 0;
                    var totfrieght = 0;
                    var totamt = 0;
                    var totamount = 0;
                    var cgsttotamt = 0;
                    var sgsttotamt = 0;
                    var igsttotamt = 0;
                    var totdis=0;
                    var totpackamt=0;
                    var qty = document.getElementById("txtBillQty" + i).value;
                    var orderqty = document.getElementById("txtQuantity" + i).value;
                    var up = document.getElementById("txtrate" + i).value;
                    var cf = document.getElementById("txtConversionfactor" + i).value;
                    var frieght = document.getElementById("txtFrieghtAmt" + i).value;
                    var IGST = document.getElementById("txtIGSTPer" + i).value;

                    var CGST = document.getElementById("txtCGSTPer" + i).value;

                    var SGST = document.getElementById("txtSGSTPer" + i).value;


            var Discperc = document.getElementById("txtDiscAmt" + i).value;
             var pcking = document.getElementById("txtPackingAmt" + i).value;

              var dmqty = document.getElementById("txtDamageQty" + i).value;
             
                    if (qty == "")
                        qty = 0;

                     if (orderqty == "")
                        orderqty = 0;

                    if (up == "")
                        up = 0;

                    if (cf == "")
                        cf = 0;

                    if (IGST == "")
                        IGST = 0;

                    if (CGST == "")
                        CGST = 0;

                    if (SGST == "")
                        SGST = 0;

                        if (dmqty == "")
           dmqty = 0;

                    if (Discperc == "")
                Discperc = 0;

                    if (frieght == "")
                       frieght = 0;

                        if (pcking == "")
                       pcking = 0;

                          var billqty = eval(orderqty) - eval(dmqty);
                          var conqty=eval(billqty)*eval(cf);

            document.getElementById("txtGoodqty" + i).value = billqty;
            document.getElementById("txtConvQty" + i).value = conqty;


       // qty=billqty;

                    var tot = eval(qty) * eval(up);
                    document.getElementById("txtAmount" + i).value = tot.toFixed(2);
                    var igstperc = (eval(tot) / 100) * eval(IGST);
                    var cgstperc = (eval(tot) / 100) * eval(CGST);
                    var sgstperc = (eval(tot) / 100) * eval(SGST);


                     document.getElementById("txtCGSTAmt" + i).value = cgstperc.toFixed(2);
                      document.getElementById("txtSGSTAmt" + i).value = sgstperc.toFixed(2);
                       document.getElementById("txtIGSTAmt" + i).value = igstperc.toFixed(2);

                    var tottax = eval(tot) + eval(igstperc) + eval(cgstperc) + eval(sgstperc)+ eval(frieght) + eval(pcking);
                    var totdisc = eval(tottax) - eval(Discperc);
                    document.getElementById("txtTotalAmount" + i).value = totdisc.toFixed(2);

                    var crate=eval(up)+eval(frieght)+eval(pcking);
            document.getElementById("txtCostRate" + i).value = crate.toFixed(2);

                   @* document.getElementById("txtPendingQty" + i).value = eval(orderqty) - eval(qty);*@
                      
                   $('tr.chkitemlst').each(function () {
                        if ($(this).css('display') !== 'none') {
                         var  frieghtt = $(this).find('#txtFrieghtAmt' + j.toString()).val();
                           if (frieghtt == "")
                        frieghtt = 0;

                        totfrieght += eval(frieghtt);

                         var  packamt = $(this).find('#txtPackingAmt' + j.toString()).val();
                           if (packamt == "")
                        packamt = 0;

                        totpackamt += eval(packamt);

                         var amt = $(this).find('#txtAmount' + j.toString()).val();
                            if (amt == "")
                        amt = 0;

                         totamt += eval(amt);

                         
                          var tamt = $(this).find('#txtTotalAmount' + j.toString()).val();
                            if (tamt == "")
                             tamt = 0;

                        totamount += eval(tamt);

                          var cgst = $(this).find('#txtCGSTAmt' + j.toString()).val();
                          if (cgst == "")
                          cgst = 0;

                         cgsttotamt += eval(cgst);


                          var sgst = $(this).find('#txtSGSTAmt' + j.toString()).val();
                          if (sgst == "")
                          sgst = 0;

                         sgsttotamt += eval(sgst);

                          var igst = $(this).find('#txtIGSTAmt' + j.toString()).val();
                          if (igst == "")
                          igst = 0;

                         igsttotamt += eval(igst);


                    var dsf = $(this).find('#txtDiscAmt' + j.toString()).val();
                    if (dsf == "")
                        dsf = 0;

                    totdis += eval(dsf);
                    

                                                }
                        j += 1;
                    });
               var roundamount = Math.ceil(totamount);

            var round = eval(roundamount) - eval(totamount);
                     document.getElementById("txtFrieghtcharge").value = totfrieght.toFixed(2);
                   document.getElementById("txtPackingcharges").value = totpackamt.toFixed(2);
                   document.getElementById("txtGross").value = totamt.toFixed(2);
                   document.getElementById("txtRound").value= round.toFixed(2);
                   document.getElementById("txtNet").value = roundamount.toFixed(2);
                 document.getElementById("hidnet").value = roundamount.toFixed(2);
                 document.getElementById("txtCGST").value = cgsttotamt.toFixed(2);
                 document.getElementById("txtSGST").value = sgsttotamt.toFixed(2);
                 document.getElementById("txtIGST").value = igsttotamt.toFixed(2);
            document.getElementById("txtDisc").value = totdis.toFixed(2);
                 //////////total net amount

        

                }
                catch (ex) {
                    alert(ex.message);
                }
            }
            function changeTot(_this){
                var discamt=document.getElementById("txtDisc").value ;
                 var frieghtamt=document.getElementById("txtFrieghtcharge").value ;
                 var packingamt=document.getElementById("txtPackingcharges").value ;

                   if (discamt == "")
                        discamt = 0;

                    if (frieghtamt == "")
                        frieghtamt = 0;

                         if (packingamt == "")
                            packingamt = 0;

                var j = 0;
                var totamt=0;
                var totalamt=0;
                var nettotal=0;
                 $('tr.chkitemlst').each(function () {
                        if ($(this).css('display') !== 'none') {

                               var amt = $(this).find('#txtAmount' + j.toString()).val();
                            if (amt == "")
                        amt = 0;
                         totamt += eval(amt);

                            }
                        j += 1;
                    });
                    var k=0;
                      $('tr.chkitemlst').each(function () {
                        if ($(this).css('display') !== 'none') {

                               var amt = $(this).find('#txtAmount' + k.toString()).val();
                            if (amt == "")
                        amt = 0;

                         var amt = $(this).find('#txtAmount' + k.toString()).val();
                            if (amt == "")
                        amt = 0;

                          var rate = $(this).find('#txtrate' + k.toString()).val();
                            if (rate == "")
                        rate = 0;
                         
                        var itemper=(eval(amt) / eval(totamt)) *100;

                       var discsplit=(eval(discamt)*eval(itemper))/100;

                       document.getElementById("txtDiscAmt"+k).value =discsplit.toFixed(2);

                      var frieghtaplit=(eval(frieghtamt)*eval(itemper))/100;

                      document.getElementById("txtFrieghtAmt"+k).value =frieghtaplit.toFixed(2);

                       var pcksplit=(eval(packingamt)*eval(itemper))/100;

                      document.getElementById("txtPackingAmt"+k).value =pcksplit.toFixed(2);


                         totalamt += eval(amt);

                         var cgstamt= document.getElementById("txtCGSTAmt" + k).value;
var sgstamt=document.getElementById("txtSGSTAmt" + k).value;
var igstamt=document.getElementById("txtIGSTAmt" + k).value;
if (cgstamt == "")
                        cgstamt = 0;

                    if (sgstamt == "")
                        sgstamt = 0;

                    if (igstamt == "")
                        igstamt = 0;

                                     var qty = document.getElementById("txtBillQty" + k).value;

 if (qty == "")
                        qty = 0;



                        var tot=eval(qty) * eval(rate);

   var tottax = eval(tot) + eval(cgstamt) + eval(sgstamt) + eval(igstamt)+ eval(frieghtaplit) + eval(pcksplit);
                    var totdisc = eval(tottax) - eval(discsplit);
                    document.getElementById("txtTotalAmount" + k).value = totdisc.toFixed(2);

                    document.getElementById("txtCostRate" + k).value=eval(rate)+eval(frieghtaplit)+eval(pcksplit);

                    nettotal +=eval(totdisc);


                            }
                        k += 1;
                    });

                      var roundamount = Math.ceil(nettotal);

            var round = eval(roundamount) - eval(nettotal);
                   
                   document.getElementById("txtGross").value = totalamt.toFixed(2);
                   document.getElementById("txtNet").value = roundamount.toFixed(2);
                 document.getElementById("hidnet").value = roundamount.toFixed(2);
                   document.getElementById("txtRound").value= round.toFixed(2);
               
                 //////////total net amount

              

            }
</script>