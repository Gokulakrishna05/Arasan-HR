@model Arasan.Models.ImportPO

@{
    Layout = "_PopupLayout";
    ViewData["Title"] = "Index";
}
<partial name="JqxGridPartial" />
@* @Html.Partial("~/Views/JqxGridPartial.cshtml")  *@

<script type="text/javascript">
    @if (TempData["notice"] != null)
    {
        @:alert('@TempData["notice"]');
    }
</script>

<div class="row wrapper border-bottom page-heading">
    <div class="col-lg-12">

        <ol class="breadcrumb">
            <li> <a href="#">Home</a> </li>
            <li> <a>Purchase</a> </li>
            <li class="active"> <strong>Purchase Order</strong> </li>
        </ol>
    </div>
</div>

<script type="text/javascript">
    $(document).ready(function () {
        var id = document.getElementById("basicid").value;
        var source =
           {
            url: "/ImportPO/MyListAttachPOGrid",
            //url: "/ItemName/ItemName",
            data: {
                strstatus: "",
                id: id,
                
            },
            datatype: "json",
            updaterow: function (rowid, rowdata) {
                // synchronize with the server - send update command
            },
            datafields: [
                //{ name: 'branch', type: 'string' },
                { name: 'upload', type: 'string' },
                

            ],
            id: 'id',
        };
        var dataAdapter = new $.jqx.dataAdapter(source,
            { contentType: 'application/json; charset=utf-8' }, {
            loadComplete: function () {

            }
        }
        );

        $("#grid").jqxGrid(
            {
                width: '70%',
                source: dataAdapter,
                autorowheight: true,
                autoheight: true,
                source: source,
                sortable: true,
                filterable: true,
                groupable: false,
                pageable: true,
                showfilterbar: true,
                filterbarmode: 'simple',
                //showfilterrow: true,
                theme: 'darkblue',
                enablebrowserselection: true,
                columns: [
                    //{ text: 'Branch', filtertype: 'checkedlist', datafield: 'branch', width: 150 },
                    { text: 'Doc Name', filtertype: 'input', datafield: 'upload', width: 500 },
                    
                ]
            });
        $("#ddlStatus").change(function () {
            var value = "Y";
            if ($(this).val() != "") {
                value = $(this).val();
            }
            source.data = {
                strstatus: value
            };
            $("#grid").jqxGrid({ source: source });
        });
    });
</script>
<div class="wrapper-content ">
    <div class="row">
        <div class="col-lg-12">
            <div class="ibox float-e-margins">
                <div class="widgets-container">

                     
                         @using (Html.BeginForm("CollectDoc", "ImportPO", FormMethod.Post, new { @id = "form1", @enctype = "multipart/form-data"  }))
                    {
                        @Html.AntiForgeryToken()
                        <form>
                             
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <tr>
                                            <td>
                                                Attachment
                                            </td>
                                            <td>
                                                <input type="file" name="file" multiple />
                                                @Html.HiddenFor(C => C.ID,new{@id="basicid"})
                                            </td>
                                        </tr>
                                    </div>
                                </div>
                            </div>
                            <p>@ViewBag.Message</p>
                            <div style="height:30px;"></div>
                            <div class="row">
                                <div class="col-md-9"></div>
                                <div class="col-md-3">
                                    <button type="submit" name="submit" class="btn aqua m-t-xs bottom15-xs" id="btnSave" value="Save" tabindex="18" >Upload</button>
                                    <input type="button" class="btn btn-danger" value="Close" onClick="window.parent.jQuery.fancybox.close();" />
                                </div>
                            </div>
                        <div class="row">


                            @*  <div class="col-md-10 ">*@
                            <div id="grid">
                            </div>

                            @* </div>*@

                        </div>

                    </form>
                    }
                </div>
            </div>
        </div>
    </div>
</div>
 