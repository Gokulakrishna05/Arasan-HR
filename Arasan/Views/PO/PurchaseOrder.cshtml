@model Arasan.Models.PO

@{
    ViewData["Title"] = "  Purchase Order ";
}   
<div class="row wrapper border-bottom page-heading">
      <div class="col-lg-12">
  <style>
        .newwidth{ width:90px; }
    </style>
        <ol class="breadcrumb">
          <li> <a href="@Url.Action("PurchaseDash", "Home")">Home</a> </li>
          <li> <a>Purchase</a> </li>
          <li class="active"> <strong> Purchase Order </strong> </li>
        </ol>
      </div>
    </div>
     <div class="wrapper-content ">
        <div class="row">
         <div class="col-lg-12">
          <div class="ibox float-e-margins">
            <div class="widgets-container">
              <h5 style="font-size:14px">Purchase Order</h5>
              <hr>
              
                                          @using (Html.BeginForm("PurchaseOrder", "PO", FormMethod.Post))
                        {
                            @Html.AntiForgeryToken()
              <form>
			@*  <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                            
                                                <label for="inputName3" class="col-sm-4 control-label">Branch<label class="Mandatory"></label></label>
                                                <div class="col-sm-8">
                                                    @Html.HiddenFor(C => C.BranchId)
                                                    @Html.HiddenFor(C => C.SuppId)
                                            @Html.DropDownListFor(C => C.Branch, Model.Brlst, new { @id = "ddlBranch", @Class = "form-control _select", @TabIndex = 1 ,@disabled="disabled"})<br />
                                                </div>
                                            </div>
                                        </div>
                                       
                                    </div>*@
									
									<div style="height:30px;"></div>
									 <div class="row">
                                        <div class="col-md-4">
                                            <div class="form-group">
                                            
                                                <label for="inputName3" class="col-sm-4 control-label">PO No.<label class="Mandatory"></label></label>
                                                <div class="col-sm-8">
                                                     @Html.TextBoxFor(C => C.PONo, new { @id = "PONo", @class = "form-control", @TabIndex = 1 ,@readonly=true})
                                            @Html.HiddenFor(C => C.ID)
                                            @Html.HiddenFor(C => C.BranchId)
                                            @Html.HiddenFor(C => C.SuppId)
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label for="inputName3" class="col-sm-4 control-label">PO Date<label class="Mandatory"></label></label>
                                               <div class="col-sm-8">
                                                     @Html.TextBoxFor(C => C.POdate, new { @id = "POdate", @class = "form-control", @TabIndex = 2 ,@readonly=true})<br/>
                                                </div>
												
                                               
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                            
                                                <label for="inputName3" class="col-sm-4 control-label">Quot. No.<label class="Mandatory"></label></label>
                                                <div class="col-sm-8">
                                                   @Html.TextBoxFor(C => C.QuoteNo, new { @id = "QuoteNo", @class = "form-control", @TabIndex = 3 ,@readonly=true})
                                                </div>
                                            </div>
                                        </div>
										
                                       
                                    </div>
               <div class="row">
                      <div class="col-md-4">
                                            <div class="form-group">
                                            
                                                <label for="inputName3" class="col-sm-4 control-label">Party Id<label class="Mandatory"></label></label>
                                                <div class="col-sm-8">
                                                        @Html.DropDownListFor(C => C.Supplier, Model.Suplst, new { @id = "ddlSupplier", @Class = "form-control _select", @TabIndex = 4 ,@disabled="disabled"})
                                                           @Html.HiddenFor(c=>c.statetype,new { @id="hdstate"})
                                                </div>
                                            </div>
                                        </div>
                                <div class="col-md-4">
                                    <div class="form-group">

                                        <label for="inputName3" class="col-sm-4 control-label">Currency<label class="Mandatory"></label></label>
                                        <div class="col-sm-8">
                                            @Html.DropDownListFor(C => C.Cur, Model.Curlst, new { @id = "ddlCur", @Class = "form-control _select", @TabIndex = 5 ,@disabled="disabled"})
                                        </div>
                                    </div>
                                </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label for="inputName3" class="col-sm-4 control-label">Exchange Rate<label class="Mandatory"></label></label>
                                              
                                                      <div class="col-sm-8">
												   @Html.TextBoxFor(C => C.ExRate, new { @id = "ExRate", @class = "form-control", @TabIndex = 6 })<br/>
												</div>
                                               
                                            </div>
                                        </div>
                            </div>
                            <div class="row">
                                        <div class="col-md-4">
                                            <div class="form-group">
                                            
                                                <label for="inputName3" class="col-sm-4 control-label">Ref. No.<label class="Mandatory"></label></label>
                                                <div class="col-sm-8">
                                                    @Html.TextBoxFor(C => C.RefNo, new { @id = "RefNo", @class = "form-control", @TabIndex = 7 })<br/>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label for="inputName3" class="col-sm-4 control-label">Ref. Date<label class="Mandatory"></label></label>
                                              
                                                     <div class="input-group date form_date col-sm-8" data-date="" data-date-format="dd-M-yyyy" >
                                                         @Html.TextBoxFor(C => C.RefDate, new { @id = "RefDate", @class = "form-control", @TabIndex = 8,@readonly=true })
														<span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span> <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span><br/>
													</div>
                                               
                                            </div>
                                        </div>
                                 
									 
									 
									 
                                       
                                      @* <div class="col-md-6">
                                            <div class="form-group">
                                            
                                                <label for="inputName3" class="col-sm-4 control-label">Credit / Debit Balance<label class="Mandatory"></label></label>
                                                <div class="col-sm-8">
                                                    <input class="form-control" id="inputEmail3" placeholder="0.00" type="text">
                                                </div>
                                            </div>
                                        </div>*@
                                         
                                    
                                       
                                    
										<div class="col-md-4">
                                            <div class="form-group">
                                            
                                                <label for="inputName3" class="col-sm-4 control-label">Address<label class="Mandatory"></label></label>
                                                <div class="col-sm-8">
                                                    <textarea class="form-control" id="inputEmail3" type="text" rows="3"></textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div style="height:30px;"></div>
									 <div class="row">
                                       
                                       <div class="col-md-4">
                                            <div class="form-group">
                                            
                                                <label for="inputName3" class="col-sm-4 control-label">Prepared by<label class="Mandatory"></label></label>
                                                <div class="col-sm-8">
                                                    @Html.DropDownListFor(C => C.Recid, Model.RecList, new { @id = "ddlEnqRec", @Class = "form-control _select", @TabIndex = 10 })
                                                </div>
                                            </div>
                                        </div>
										<div class="col-md-4">
                                            <div class="form-group">
                                            
                                                <label for="inputName3" class="col-sm-4 control-label">Conatct No.<label class="Mandatory"></label></label>
                                                <div class="col-sm-8">
                                                    <input class="form-control" id="inputEmail3" placeholder="Conatct No." type="text">
                                                </div> 
                                            </div>
                                        </div> 
                                    </div>
									
									
									 <div style="height:30px;"></div>
			 <div class="row">
			
			 
          <div class="col-lg-12" style="overflow-x:scroll; min-width:300px; min-height:200px;">
           
                    <table class="table table-striped table-hover">
                      <thead>
                        <tr>
                        @* <th>   Item Group</th>*@
                          <th> Item </th>
                         <th> TARIFF </th> 
                          <th> Description </th>
                          <th>Unit</th>
                          <th> Conversion. Factor </th>
                        <th> Order Qty </th>
                       
                                 <th>Rate </th>
                                <th> Amount</th>
                            @*     <th> Disc %</th>*@
                         <th> Disc amount</th>
                         <th> Frieght charges</th>
                                                <th> Packing charges</th>
                        @*  <th> Cost Rate</th>
                           <th>Assessable Value</th>
                            <th>Tariff Id</th>*@
                              <th>CGSTP</th>
                               <th>SGSTP</th>
                                <th>IGSTP</th>
                                 <th>CGST</th>
                                  <th>SGST</th>
                                   <th>IGST</th>
                                    <th>Total Amount</th>
                                    <th>Due date</th>
                                      <th>Purchase Type</th>
                        </tr>
                      </thead>
                      <tbody id="tbBooks">
                        @{

                                                            int i = 0;
                                                            int j = 1;
                                                            foreach (var item in Model.PoItem.ToList())
                                                            {
                                                                                                                                            <tr id="trBook@(i)" class="chkitemlst" style="height: 30px;border-bottom: 1px dashed #ddd;">
                                                                                                                                            @*<td>
                                                                                                                                            @Html.DropDownListFor(o => o.PoItem[i].ItemGroupId, Model.PoItem[i].ItemGrouplst, "Please Select", new { @class = "form-control _select newcss", @id = "ddlItemGrp" + i, style = "width: 170px;", onchange = "Grup_Change(this.value," + i + ")",disabled="disabled" })
                                                                                                                                        </td>*@
                                                                                                                                        <td>

                                                            @Html.DropDownListFor(o => o.PoItem[i].ItemId, Model.PoItem[i].Itemlst, "Please Select", new { @class = "form-control _select newcss", @id = "ddlItem" + i, style = "width: 170px;", onchange = "changeItem(this.value," + i + ")",disabled="disabled" })
                                                                                                                                        @Html.HiddenFor(o => o.PoItem[i].saveItemId)
                                                                                                                                            </td>
                                                                                                                                                 <td>

                                                       @Html.DropDownListFor(o => o.PoItem[i].gst, Model.PoItem[i].gstlst, "Please Select", new { @class = "form-control _select newcss", @id = "ddlgst" + i, style = "width: 170px;", onchange = "changeGst(this.value," + i + ")" })
                                                            @Html.HiddenFor(o => o.PoItem[i].Percentage,new{@id="txtPercentage" +i})
                                                                                                                                         
                                                                                                                                            </td> 
                                                                                                                                         <td>
                                                                                                                                            @Html.TextBoxFor(o => o.PoItem[i].Desc, new { @id = "txtDesc" + i, @class = "form-control", style = "width: 200px;", @readonly = "readonly"})
                                                                                                                                        </td>
                                                                                                                                         <td>
                                                                                                                                            @Html.TextBoxFor(o => o.PoItem[i].Unit, new { @id = "txtUnit" + i, @class = "form-control", style = "width: 100px;" , @readonly = "readonly"})
                                                                                                                                        </td>
                                                                                                                                         <td>
                                                                                                                                            @Html.TextBoxFor(o => o.PoItem[i].Conversionfactor, new { @id = "txtConversionfactor" + i, @class = "form-control", style = "width: 100px;", @readonly = "readonly" })
                                                                                                                                        </td>
                                                                                                                                         <td>
                                                                                                                                            @Html.TextBoxFor(o => o.PoItem[i].Quantity, new { @id = "txtQuantity" + i, @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 100px;text-align:right", @onkeyup = "changeQty(this," + i + ")"})
                                                                                                                                        </td>
                                                                                                                                        
                                                                                                                                         <td>
                                                                                                                                            @Html.TextBoxFor(o => o.PoItem[i].rate, new { @id = "txtrate" + i, @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 100px;text-align:right", @onkeyup = "changeQty(this," + i + ")" })
                                                                                                                                        </td>
                                                                                                                                         <td>
                                                                                                                                          @Html.HiddenFor(o => o.PoItem[i].Isvalid, new { @id = "Isvalid" + i })
                                                                                                                                            @Html.TextBoxFor(o => o.PoItem[i].Amount, new { @id = "txtAmount" + i, @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 100px;text-align:right",@readonly="readonly"})
                                                                                                                                        </td>
                                                                                                                                        @* <td>
                                                                                                                                            @Html.TextBoxFor(o => o.PoItem[i].DiscPer, new { @id = "txtDiscPer" + i, @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 100px;text-align:right", @onkeyup = "changeQty(this," + i + ")"  })
                                                                                                                                        </td>*@
                                                                                                                                         <td>
                                                                                                                                            @Html.TextBoxFor(o => o.PoItem[i].DiscAmt, new { @id = "txtDiscAmt" + i, @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 100px;text-align:right", @onkeyup = "changeQty(this," + i + ")" })
                                                                                                                                        </td>
                                                                                                                                         <td>
                                                                                                                                            @Html.TextBoxFor(o => o.PoItem[i].FrieghtAmt, new { @id = "txtFrieghtAmt" + i, @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 100px;text-align:right", @onkeyup = "changeQty(this," + i + ")" })
                                                                                                                                        </td>
                                                        <td>
                                                            @Html.TextBoxFor(o => o.PoItem[i].PackingAmt, new { @id = "txtPackingAmt" + i, @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 100px;text-align:right", @onkeyup = "changeQty(this," + i + ")" })
                                                        </td>
                                                                                                                                         <td>
                                                                                                                                            @Html.TextBoxFor(o => o.PoItem[i].CGSTPer, new { @id = "txtCGSTPer" + i, @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 100px;text-align:right", @onkeyup = "changeQty(this," + i + ")",@readonly="readonly" })
                                                                                                                                        </td>
                                                                                                                                          <td>
                                                                                                                                            @Html.TextBoxFor(o => o.PoItem[i].SGSTPer, new { @id = "txtSGSTPer" + i, @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 100px;text-align:right", @onkeyup = "changeQty(this," + i + ")" ,@readonly="readonly"})
                                                                                                                                        </td>
                                                                                                                                          <td>
                                                            @Html.TextBoxFor(o => o.PoItem[i].IGSTPer, new { @id = "txtIGSTPer" + i, @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 100px;text-align:right", @onkeyup = "changeQty(this," + i + ")",@readonly="readonly" })
                                                                                                                                        </td>
                                                                                                                                          <td>
                                                                                                                                            @Html.TextBoxFor(o => o.PoItem[i].CGSTAmt, new { @id = "txtCGSTAmt" + i, @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 100px;text-align:right", @onkeyup = "changeQty(this," + i + ")" ,@readonly="readonly"})
                                                                                                                                        </td>
                                                                                                                                        
                                                                                                                                          <td>
                                                                                                                                            @Html.TextBoxFor(o => o.PoItem[i].SGSTAmt, new { @id = "txtSGSTAmt" + i, @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 100px;text-align:right", @onkeyup = "changeQty(this," + i + ")",@readonly="readonly" })
                                                                                                                                        </td>
                                                                                                                                        
                                                                                                                                          <td>
                                                            @Html.TextBoxFor(o => o.PoItem[i].IGSTAmt, new { @id = "txtIGSTAmt" + i, @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 100px;text-align:right", @onkeyup = "changeQty(this," + i + ")",@readonly="readonly" })
                                                                                                                                        </td>
                                                                                                                                         <td>
                                                                                                                                            @Html.TextBoxFor(o => o.PoItem[i].TotalAmount, new { @id = "txtTotalAmount" + i, @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 100px;text-align:right", @onkeyup = "changeQty(this," + i + ")" ,@readonly="readonly" })
                                                                                                                                        </td>
                                                                                                                                         <td>
                                                                                                                 <div class="input-group date form_date col-sm-8" data-date="" data-date-format="dd-M-yyyy" >
                                                                                                                   @Html.TextBoxFor(o => o.PoItem[i].Duedate, new { @id = "txtDuedate" + i, @class = "form-control", style = "width: 100px;",@readonly=true}) 
                                                                                                           <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span> <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                                                                                                        </div> </td>
                                                                                                         <td>
                                                                                                                                            @Html.DropDownListFor(o => o.PoItem[i].Purtype, Model.PoItem[i].PURLst, "Please Select", new { @class = "form-control chosen-select newcss", @id = "ddlPurtype" + i, style = "width: 170px;"})
                                                                                                                                        </td>
                                                                                                                                       @*   <td>
                                                                                                               
                                                                                                                <img onclick="removeRow(@(i));" src="../Images/delete.png" style="cursor:pointer" /> <input name="EnqLst.Index" type="hidden" value="@(i)" />
                                                                                                            </td>*@
                                                                                                                                        </tr>


                                                             i = i + 1;
                                                             j = j + 1;
                                                            }
                                                        }
                      </tbody>
                    </table>
                 
          </div>
        </div>
                            <div class="row">
                                <div class="col-md-2" style="overflow-x:scroll; min-width:300px; min-height:300px;">

                                    @* <div class="ibox float-e-margins">*@

                                    <!-- / ibox-title -->
                                    @* <div id="demo3" class="ibox-content collapse in">
                                <div class="borderedTable">
                                <div class="table-scrollable">*@
                                    <table class="table table-striped table-hover" id="dataTable">
                                        <thead>
                                        </thead>
                                        <tbody id="tbBooks">
                                            @{


                                                <tr>
                                                    <th>Gross</th>
                                                    <td>

                                                        @Html.TextBoxFor(C => C.Gross, new { @id = "txtGross", @class = "form-control", @TabIndex = 2 ,style = "width: 150px;text-align:right",onkeydown = "return isNumeric2(event.keyCode,this.value)",@readonly=true})
                                                    </td>
                                                </tr>
                                                <tr>

                                                    <th>Packing and Forwarding ( + )</th>
                                                    <td>
                                                        @Html.TextBoxFor(C => C.Packingcharges, new { @id = "txtPackingcharges", @class = "form-control", @TabIndex = 2,onkeydown = "return isNumeric2(event.keyCode,this.value)",style = "width: 150px;text-align:right" , @onkeyup = "changeTot(this)"})
                                                    </td>
                                                </tr>
                                                 <tr>
                                                    <th>DISCOUNT</th>
                                                    <td>
                                                        @Html.TextBoxFor(o => o. Disc, new { @id = "txtDisc"  , @class = "form-control",style = "width: 150px;text-align:right",@onkeyup = "changeTot(this)"})
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <th>Frieght</th>
                                                    <td>
                                                        @Html.TextBoxFor(C => C.Frieghtcharge, new { @id = "txtFrieghtcharge", @class = "form-control", @TabIndex = 2, onkeydown = "return isNumeric2(event.keyCode,this.value)",style = "width: 150px;text-align:right" , @onkeyup = "changeTot(this)"})
                                                    </td>
                                                </tr>
                                                //<tr>
                                                //    <th>Other Charge</th>
                                                //    <td>

                                                //        @Html.TextBoxFor(C => C.Othercharges, new { @id = "txtOthercharges", @class = "form-control", @TabIndex = 2,onkeydown = "return isNumeric2(event.keyCode,this.value)",style = "width: 150px;text-align:right"  , @onkeyup = "changeTot(this)"})
                                                //    </td>
                                                //</tr>
                                                <tr>
                                                    <th>CGST </th>
                                                    <td>

                                                        @Html.TextBoxFor(o => o. CGST, new { @id = "txtCGST"  , @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 150px;text-align:right",@readonly="readonly"})
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <th>SGST </th>
                                                    <td>
                                                        @Html.TextBoxFor(o => o. SGST, new { @id = "txtSGST"  , @class = "form-control", style = "width: 150px;text-align:right", @readonly = "readonly" })
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <th>IGST </th>
                                                    <td>
                                                        @Html.TextBoxFor(o => o. IGST, new { @id = "txtIGST"  , @class = "form-control", style = "width: 150px;text-align:right", @readonly = "readonly" })
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <th>Round</th>
                                                    <td>

                                                        @Html.TextBoxFor(C => C.Round, new { @id = "txtRound", @class = "form-control", @TabIndex = 2 ,onkeydown = "return isNumeric2(event.keyCode,this.value)",style = "width: 150px;text-align:right" , @onkeyup = "changeTot(this)"})
                                                    </td>
                                                </tr>
                                               
                                               
                                                <tr>
                                                    <th>Net</th>
                                                    <td>

                                                        @Html.TextBoxFor(C => C.Net, new { @id = "txtNet", @class = "form-control", @TabIndex = 2,onkeydown = "return isNumeric2(event.keyCode,this.value)",style = "width: 150px;text-align:right" ,@readonly=true})
                                                    </td>
                                                </tr>
                                                

                                            }


                                        </tbody>
                                    </table>
                                </div>
                             



                            <div class="col-md-8">
                                <div class="tabs-container">
                                    <ul class="nav nav-tabs">
                                        @*<li class="active"><a href="#tab-1" data-toggle="tab">Despatch Address</a></li>*@
                                        <li class="active"><a href="#tab-1" data-toggle="tab">Despatch Address</a></li>
                                        <li><a href="#tab-2" data-toggle="tab">Spec</a></li>

                                    </ul>
                                    <div class="tab-content">


                                        <div class="tab-pane active" id="tab-1">

                                            <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                            
                                                <label for="inputName3" class="col-sm-4 control-label">Payment Terms<label class="Mandatory"></label></label>
                                                <div class="col-sm-8">
                                            @Html.DropDownListFor(C => C.Paymentterms, Model.Paymenttermslst, new { @id = "ddlPaymentterms", @Class = "form-control _select", @TabIndex = 1 })<br />
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label for="inputName3" class="col-sm-4 control-label">Delivery Terms<label class="Mandatory"></label></label>
                                              
                                                      <div class="col-sm-8">
												 @Html.DropDownListFor(C => C.delterms, Model.deltermlst, new { @id = "ddldelterms", @Class = "form-control _select", @TabIndex = 1 })<br/>
												</div>
                                               
                                            </div>
                                        </div>
                                    </div>
									
									<div style="height:30px;"></div>
									 <div class="row">
                                         <div class="col-md-6">
                                            <div class="form-group">
                                                <label for="inputName3" class="col-sm-4 control-label">Despatch<label class="Mandatory"></label></label>
                                              
                                                      <div class="col-sm-8">
												 @Html.DropDownListFor(C => C.desp, Model.desplst, new { @id = "ddldesp", @Class = "form-control _select", @TabIndex = 1 })<br/>
												</div>
                                               
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label for="inputName3" class="col-sm-4 control-label">Warrenty terms<label class="Mandatory"></label></label>
                                              
                                                      <div class="col-sm-8">
												 @Html.DropDownListFor(C => C.warrantyterms, Model.warrantytermslst, new { @id = "ddlwarrantyterms", @Class = "form-control _select", @TabIndex = 1 })<br/>
												</div>
                                               
                                            </div>
                                        </div>
										</div>
                                       
                                      @*  <div style="height:30px;"></div>
									 <div class="row">
                                       <div class="col-md-6">
                                            <div class="form-group">
                                                <label for="inputName3" class="col-sm-4 control-label">Po Sent By<label class="Mandatory"></label></label>
                                              
                                                      <div class="col-sm-8">
												 @Html.DropDownListFor(C => C.assignid, Model.assignList, new { @id = "ddlPosent", @Class = "form-control _select", @TabIndex = 1 })
												</div>
                                               
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label for="inputName3" class="col-sm-4 control-label">Despatch Address<label class="Mandatory"></label></label>
                                              
                                                      <div class="col-sm-8">
												  @Html.TextAreaFor(C => C.DespatchAddr, new { @id = "txtDespatchAddr", @class = "form-control", @TabIndex = 2 })
												</div>
                                               
                                            </div>
                                        </div>
										</div>
                                        <div style="height:30px;"></div>
									 <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                            
                                                <label for="inputName3" class="col-sm-4 control-label">Phone No.<label class="Mandatory"></label></label>
                                                <div class="col-sm-8">
                                                  @Html.TextBoxFor(C => C.PhoneNo, new { @id = "txtPhoneNo", @class = "form-control", @TabIndex = 2 })
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label for="inputName3" class="col-sm-4 control-label">Fax<label class="Mandatory"></label></label>
                                              
                                                      <div class="col-sm-8">
												@Html.TextBoxFor(C => C.Fax, new { @id = "txtFax", @class = "form-control", @TabIndex = 2 })
												</div>
                                               
                                            </div>
                                        </div>
                                    </div>*@
                                       
									<div style="height:30px;"></div>
									 <div class="row">
                                        <div class="col-md-12">
                                            <div class="form-group">
                                            
                                                <label for="inputName3" class="col-sm-2 control-label">Narration<label class="Mandatory"></label></label>
                                                <div class="col-sm-10">
                                                    @Html.TextAreaFor(C => C.Narration, new { @id = "txtNarration", @class = "form-control", @TabIndex = 2 })
                                                </div>
                                            </div>
                                        </div>
                                      
                                        <div class="col-md-12">
                                            <div class="form-group">
                                            
                                               <br/> <label for="inputName3" class="col-sm-2 control-label">Amount In Words<label class="Mandatory"></label></label>
                                                <div class="col-sm-10">
												 @Html.TextBoxFor(C => C.Amount, new { @id = "txtAmount", @class = "form-control", @TabIndex = 2,onkeydown = "return isNumeric2(event.keyCode,this.value)" ,@readonly=true})
                                                </div>
                                            </div>
                                        </div>
                                       
                                  
                                    </div>
                                    </div>
                                      


                                        <div class="tab-pane " id="tab-2">

                                             
									 
                                       
                                    
									<div style="height:30px;"></div>
									 <div class="row">
                                        <div class="col-md-12">
                                            <div class="form-group">
                                            
                                                <label for="inputName3" class="col-sm-2 control-label">Specification<label class="Mandatory"></label></label>
                                                <div class="col-sm-10">
                                                    @Html.TextAreaFor(C => C.spec, new { @id = "txtspec", @class = "form-control", @TabIndex = 2 })
                                                </div>
                                            </div>
                                        </div>
                                      
                                        
                                       
                                  
                                    </div>
                                    </div>
                                     </div> 
                                        </div>
                                    </div>
                            </div>
                        
									<div style="height:30px;"></div>
                <button type="submit" class="btn aqua m-t-xs bottom15-xs">Submit</button>
				  <button class="btn btn-danger" type="button" causesvalidation="false" onclick="location.href='@Url.Action("ListPO", "PO")'">Cancel</button>
              </form>
              }
            </div>
          </div>
        </div>
         
        </div>
      </div>
<script>
    $(function () {
        $('._select').select2();
    });
      $('.form_date').datetimepicker({
     //   language:  'fr',
        weekStart: 1,
        todayBtn:  1,
    autoclose: 1,
    todayHighlight: 1,
    startView: 2,
    minView: 2,
    forceParse: 0
    });


     function changeGst(ItemId,i) {

          var cutid = document.getElementById("ddlSupplier" ).value;
         
          $.ajax({
                        url: 'GetGSTDetail',
                        data: { "ItemId": ItemId, "custid": cutid },
                        type: "GET",
                        success: function (result) {
                            document.getElementById("hdstate").value = result.type;
                          
                            document.getElementById("txtPercentage" + i).value = result.per;
                            
                            if (result.type == "GST") {
                                document.getElementById("txtCGSTPer" + i).value = eval(result.per) / 2;
                                document.getElementById("txtSGSTPer" +i).value = eval(result.per) / 2;
                                document.getElementById("txtIGSTPer" + i).value = "0";
                            }
                            else {
                                document.getElementById("txtIGSTPer" + i).value = eval(result.per);
                                document.getElementById("txtCGSTPer" + i).value = "0";
                                document.getElementById("txtSGSTPer" +i).value = "0";
                            }
                          changeQty(0, i);

                        },
                        error: function () {
                            alert("Data Not Found");
                        }
                    });
                    }
    function changeQty(_this, i) {
                try {

                       var j = 0;
                    var qty = 0;
                    var tot = 0;
                    var totfrieght = 0;
                    var totamt = 0;
                    var totamount = 0;
            var cgsttotamt = 0;
            var sgsttotamt = 0;
            var igsttotamt = 0;
            var totpackamt = 0;
            var totdisamt = 0;
                    var qty = document.getElementById("txtQuantity" + i).value;
            
                    var up = document.getElementById("txtrate" + i).value;
    
                    var cf = document.getElementById("txtConversionfactor" + i).value;
          
                    var frieght = document.getElementById("txtFrieghtAmt" + i).value;
                 
                    var packingamt = document.getElementById("txtPackingAmt" + i).value;
             
                    var IGST = document.getElementById("txtIGSTPer" + i).value;
                   
                    var CGST = document.getElementById("txtCGSTPer" + i).value;
         
                    var SGST = document.getElementById("txtSGSTPer" + i).value;
               
            var Disc = document.getElementById("txtDiscAmt" + i).value;
         
                    if (qty == "")
                        qty = 0;

                    if (up == "")
                        up = 0;

                    if (cf == "")
                        cf = 1;

                    if (IGST == "")
                        IGST = 0;

                    if (CGST == "")
                        CGST = 0;

                    if (SGST == "")
                        SGST = 0;

                    if (Disc == "")
                        Disc = 0;

                    if (frieght == "")
                        frieght = 0;

                    var tot = eval(qty) * eval(up) * eval(cf);
                    
            document.getElementById("txtAmount" + i).value = tot.toFixed(2);
                    var igstperc = (eval(tot) / 100) * eval(IGST);
                    var cgstperc = (eval(tot) / 100) * eval(CGST);
                    var sgstperc = (eval(tot) / 100) * eval(SGST);

                  @*  var Discperc = (eval(tot) / 100) * eval(Disc);*@
                
                     document.getElementById("txtCGSTAmt" + i).value = cgstperc.toFixed(2);
                      document.getElementById("txtSGSTAmt" + i).value = sgstperc.toFixed(2);
                       document.getElementById("txtIGSTAmt" + i).value = igstperc.toFixed(2);
                       @* document.getElementById("txtDiscAmt" + i).value = Discperc.toFixed(2);*@

                        var tottax = eval(tot) + eval(igstperc) + eval(cgstperc) + eval(sgstperc) + eval(frieght) + eval(packingamt);
            var totdisc = eval(tottax) - eval(Disc);
            document.getElementById("txtTotalAmount" + i).value = totdisc.toFixed(2);


                    $('tr.chkitemlst').each(function () {
                        if ($(this).css('display') !== 'none') {
                            frieght = $(this).find('#txtFrieghtAmt' + j.toString()).val();
                            if (frieght == "")
                        frieght = 0;

                         var amt = $(this).find('#txtAmount' + j.toString()).val();
                            if (amt == "")
                        amt = 0;

                         totamt += eval(amt);
                         totfrieght += eval(frieght);
                          var  packamt = $(this).find('#txtPackingAmt' + j.toString()).val();
                           if (packamt == "")
                        packamt = 0;

                        totpackamt += eval(packamt);

                        
                          var  disamt = $(this).find('#txtDiscAmt' + j.toString()).val();
                           if (disamt == "")
                        disamt = 0;

                        totdisamt += eval(disamt);
                    var cgst = $(this).find('#txtCGSTAmt' + j.toString()).val();
                    if (cgst == "")
                        cgst = 0;

                    cgsttotamt += eval(cgst);


                    var sgst = $(this).find('#txtSGSTAmt' + j.toString()).val();
                    if (sgst == "")
                        sgst = 0;

                    sgsttotamt += eval(sgst);

                    var igst = $(this).find('#txtIGSTAmt' + j.toString()).val();
                    if (igst == "")
                        igst = 0;

                    igsttotamt += eval(igst);
                          var tamt = $(this).find('#txtTotalAmount' + j.toString()).val();
                            if (tamt == "")
                        tamt = 0;

                        totamount += eval(tamt);

                              }
                        j += 1;
                    });

            var roundamount = Math.ceil(totamount);

            var round = eval(roundamount) - eval(totamount);
                  document.getElementById("txtFrieghtcharge").value = totfrieght.toFixed(2);
            document.getElementById("txtPackingcharges").value = totpackamt.toFixed(2);
            document.getElementById("txtDisc").value = totdisamt.toFixed(2);
                   document.getElementById("txtGross").value = totamt.toFixed(2);
                   document.getElementById("txtNet").value = roundamount.toFixed(2);
            document.getElementById("txtRound").value = round.toFixed(2);
            document.getElementById("txtCGST").value = cgsttotamt.toFixed(2);
            document.getElementById("txtSGST").value = sgsttotamt.toFixed(2);
            document.getElementById("txtIGST").value = igsttotamt.toFixed(2);
              @*   document.getElementById("hidnet").value = totamount.toFixed(2);*@
                document.getElementById("txtAmount").value = withDecimal(roundamount.toFixed(2));


         @*   //////////total net amount
            var frieght = document.getElementById("txtFrieghtcharge").value;
            var packing = document.getElementById("txtPackingcharges").value;
            var totamounts = 0;
            var rotamt = 0;
            if (frieght == "")
                frieght = 0;

            if (packing == "")
                packing = 0;

    @*   if (other == "")
                other = 0; 

                              
    @* if (otherdeduct == "")
                otherdeduct = 0;

                if (roundoffminus == "")
                roundoffminus = 0; 

                totamounts = eval(frieght) + eval(packing)  + eval(netamt);
      rotamt = eval(totamounts) - (eval(roundoffminus) + eval(otherdeduct));
                    document.getElementById("txtNet").value = totamounts.toFixed(2);*@
                }
                catch (ex) {
                    alert(ex.message);
                }
            }
            function changeTot(_this){
        var netamt = document.getElementById("txtNet").value;
                var frieght =document.getElementById("txtFrieghtcharge").value;
                 var packing =document.getElementById("txtPackingcharges").value;
                  var other =document.getElementById("txtOthercharges").value;
        var disc = document.getElementById("txtDisc").value;
                
                  

                var totamount = 0;
                var rotamt = 0;
                  if (frieght == "")
                        frieght = 0;

                         if (packing == "")
                        packing = 0;

                         if (other == "")
                        other = 0;

        if (disc == "")
            disc = 0;

                        @* if (roundoff == "")
                        roundoff = 0;
*@
                      

                totamount = eval(frieght) + eval(packing) + eval(other) + eval(netamt) ;
        var totalamt = eval(totamount) - eval(disc);
        var roundamount = Math.ceil(totalamt);

        var round = eval(roundamount) - eval(totalamt);
        document.getElementById("txtNet").value = roundamount.toFixed(2);
        document.getElementById("txtRound").value = round.toFixed(2);
        document.getElementById("txtAmount").value = withDecimal(totamount.toFixed(2));

        var frieghtamt = document.getElementById("txtFrieghtcharge").value;
        var packingamt = document.getElementById("txtPackingcharges").value;
        var discamt = document.getElementById("txtDisc").value;
         

        if (frieghtamt == "")
            frieghtamt = 0;

        if (packingamt == "")
            packingamt = 0;

        var j = 0;
        var totamt = 0;
        var totalamt = 0;
        var nettotal = 0;
        $('tr.chkitemlst').each(function () {
            if ($(this).css('display') !== 'none') {

                var amt = $(this).find('#txtAmount' + j.toString()).val();
                if (amt == "")
                    amt = 0;
                totamt += eval(amt);

            }
            j += 1;
        });
        var k = 0;
        $('tr.chkitemlst').each(function () {
            if ($(this).css('display') !== 'none') {

                var amt = $(this).find('#txtAmount' + k.toString()).val();
                if (amt == "")
                    amt = 0;

                var amt = $(this).find('#txtAmount' + k.toString()).val();
                if (amt == "")
                    amt = 0;

                var rate = $(this).find('#txtrate' + k.toString()).val();
                if (rate == "")
                    rate = 0;

                var itemper = (eval(amt) / eval(totamt)) * 100;

              var discsplit = (eval(discamt) * eval(itemper)) / 100;

                document.getElementById("txtDiscAmt" + k).value = discsplit.toFixed(2);

                var frieghtaplit = (eval(frieghtamt) * eval(itemper)) / 100;

                document.getElementById("txtFrieghtAmt" + k).value = frieghtaplit.toFixed(2);

                var pcksplit = (eval(packingamt) * eval(itemper)) / 100;

                document.getElementById("txtPackingAmt" + k).value = pcksplit.toFixed(2);
                totalamt += eval(amt);

                var cgstamt = document.getElementById("txtCGSTAmt" + k).value;
                var sgstamt = document.getElementById("txtSGSTAmt" + k).value;
                var igstamt = document.getElementById("txtIGSTAmt" + k).value;
                if (cgstamt == "")
                    cgstamt = 0;

                if (sgstamt == "")
                    sgstamt = 0;

                if (igstamt == "")
                    igstamt = 0;

                var qty = document.getElementById("txtBillQty" + k).value;

                if (qty == "")
                    qty = 0;



                var tot = eval(qty) * eval(rate);

                var tottax = eval(tot) + eval(cgstamt) + eval(sgstamt) + eval(igstamt) + eval(frieghtaplit) + eval(pcksplit);
                var totdisc = eval(tottax) - eval(discsplit);
                document.getElementById("txtTotalAmount" + k).value = totdisc.toFixed(2);

                document.getElementById("txtCostRate" + k).value = eval(rate) + eval(frieghtaplit) + eval(pcksplit);

                nettotal += eval(totdisc);


            }
            k += 1;
        });
        var roundamount = Math.ceil(nettotal);

        var round = eval(roundamount) - eval(nettotal);

        document.getElementById("txtGross").value = totalamt.toFixed(2);
        document.getElementById("txtNet").value = roundamount.toFixed(2);
        document.getElementById("hidnet").value = roundamount.toFixed(2);
        document.getElementById("txtRound").value = round.toFixed(2);
            }

            function roundtorupee(amt) {
        if (amt - round_decimals(amt, 0) > 0.5)
            return pad_with_zeros(round_decimals(amt + 1, 0));
        return pad_with_zeros(round_decimals(amt, 0));
    }

    function convertNumberToWords(amount) {
    var words = new Array();
    words[0] = '';
    words[1] = 'One';
    words[2] = 'Two';
    words[3] = 'Three';
    words[4] = 'Four';
    words[5] = 'Five';
    words[6] = 'Six';
    words[7] = 'Seven';
    words[8] = 'Eight';
    words[9] = 'Nine';
    words[10] = 'Ten';
    words[11] = 'Eleven';
    words[12] = 'Twelve';
    words[13] = 'Thirteen';
    words[14] = 'Fourteen';
    words[15] = 'Fifteen';
    words[16] = 'Sixteen';
    words[17] = 'Seventeen';
    words[18] = 'Eighteen';
    words[19] = 'Nineteen';
    words[20] = 'Twenty';
    words[30] = 'Thirty';
    words[40] = 'Forty';
    words[50] = 'Fifty';
    words[60] = 'Sixty';
    words[70] = 'Seventy';
    words[80] = 'Eighty';
    words[90] = 'Ninety';
    amount = amount.toString();
    var atemp = amount.split(".");
    var number = atemp[0].split(",").join("");
    var n_length = number.length;
    var words_string = "";
    if (n_length <= 9) {
        var n_array = new Array(0, 0, 0, 0, 0, 0, 0, 0, 0);
        var received_n_array = new Array();
        for (var i = 0; i < n_length; i++) {
            received_n_array[i] = number.substr(i, 1);
        }
        for (var i = 9 - n_length, j = 0; i < 9; i++, j++) {
            n_array[i] = received_n_array[j];
        }
        for (var i = 0, j = 1; i < 9; i++, j++) {
            if (i == 0 || i == 2 || i == 4 || i == 7) {
                if (n_array[i] == 1) {
                    n_array[j] = 10 + parseInt(n_array[j]);
                    n_array[i] = 0;
                }
            }
        }
        value = "";
        for (var i = 0; i < 9; i++) {
            if (i == 0 || i == 2 || i == 4 || i == 7) {
                value = n_array[i] * 10;
            } else {
                value = n_array[i];
            }
            if (value != 0) {
                words_string += words[value] + " ";
            }
            if ((i == 1 && value != 0) || (i == 0 && value != 0 && n_array[i + 1] == 0)) {
                words_string += "Crores ";
            }
            if ((i == 3 && value != 0) || (i == 2 && value != 0 && n_array[i + 1] == 0)) {
                words_string += "Lakhs ";
            }
            if ((i == 5 && value != 0) || (i == 4 && value != 0 && n_array[i + 1] == 0)) {
                words_string += "Thousand ";
            }
            if (i == 6 && value != 0 && (n_array[i + 1] != 0 && n_array[i + 2] != 0)) {
                words_string += "Hundred and ";
            } else if (i == 6 && value != 0) {
                words_string += "Hundred ";
            }
        }
        words_string = words_string.split("  ").join(" ");
    }
    return words_string;
}
function withDecimal(n) {
    var nums = n.toString().split('.')
    var whole = convertNumberToWords(nums[0])
    if (nums.length == 2) {
        var fraction = convertNumberToWords(nums[1])
        return whole + ' ' + fraction;
    } else {
        return whole;
    }
}

    
</script>