@model Arasan.Models.ProductionEntry
@{
    ViewData["Title"] = "Production Entry";
}
<style>
    .newwidth {
        width: 120px;
    }
    .mandatory{
	color: red;
	position:relative;
	top:2px;
	left:5px;
}
</style>
<div class="row wrapper border-bottom page-heading">
    <div class="col-lg-12">

        <ol class="breadcrumb">
            <li> <a href="#">Home</a> </li>
            <li> <a>Production</a> </li>
            <li class="active"> <strong>Production  Entry</strong> </li>
        </ol>
    </div>
</div>
<div class="wrapper-content ">
    <div class="row">
        <div class="col-lg-12">
            <div class="ibox float-e-margins">
                <div class="widgets-container">
                    <h5 style="font-size:14px">Production - Entry</h5>
                    <hr>
                                                              @using (Html.BeginForm("ApproveProCEntry", "ProductionEntry", FormMethod.Post))
                        {
                            @Html.AntiForgeryToken()
                    <form>
                       <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">

                                    <label for="inputName3" class="col-sm-4 control-label">Branch <label class="mandatory"></label></label>
                                    <div class="col-sm-8">
                                        @Html.HiddenFor(C => C.ID)   @Html.HiddenFor(C => C.BranchId,new { @id = "hdBranchId"})
                                        @Html.HiddenFor(C => C.LOCID,new { @id = "hdLOCID" })
                                      @Html.HiddenFor(C => C.WCID)  
                                            @Html.DisplayFor(C => C.Branch)<br>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">

                                    <label for="inputName3" class="col-sm-4 control-label">Work Center<label class="mandatory"></label></label>
                                    <div class="col-sm-8">

                                            @Html.DisplayFor(C => C.Location)<br>

                                    </div>
                                </div>
                            </div>
                        </div>
                        <div style="height:15px;"></div>

                        <div class="row">
                          
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="inputName3" class="col-sm-4 control-label">Processer ID<label class="Mandatory"></label></label>

                                    <div class="col-sm-8">
                                         @Html.DisplayFor(C => C.ProcessId)<br>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="inputName3" class="col-sm-4 control-label">Doc ID<label class="Mandatory"></label></label>

                                    <div class="col-sm-8">
                                        @Html.DisplayFor(C => C.DocId)<br>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                             <div class="col-md-6">
                                <div class="form-group">
                                    <label for="inputName3" class="col-sm-4 control-label">Shift Date<label class="Mandatory"></label></label>

                                    <div class="col-sm-8">
                                        @Html.DisplayFor(C => C.Shiftdate)<br>
                                    </div>
                                </div>
                            </div>
                                          <div class="col-md-6">
                                <div class="form-group">

                                    <label for="inputName3" class="col-sm-4 control-label">Entry Type<label class="mandatory"></label></label>
                                    <div class="col-sm-8">
                                       @Html.DisplayFor(C => C.EntryType)<br>
                                        
                                    </div>
                                </div>
                            </div>
                        </div>

                 
                        <div style="height:15px;"></div>
                        <div class="row">
                          
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="inputName3" class="col-sm-4 control-label">Shift<label class="mandatory"> *</label></label>

                                    <div class="col-sm-8">
                                        @Html.DisplayFor(C => C.Shift)<br>
                                    </div>
                                </div>
                            </div>
                              <div class="col-md-6">
                                <div class="form-group">
                                    <label for="inputName3" class="col-sm-4 control-label">Shift Details<label class="Mandatory"></label></label>

                                    <div class="col-sm-8">
                                       <span style="color:green;font-size: 14px;"> <label id="shiftdetails"></label></span><br/>
                                    </div>
                                </div>
                            </div>
                        </div>
                         <div style="height:15px;"></div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">

                                    <label for="inputName3" class="col-sm-4 control-label">Sch Qty<label class="mandatory"> *</label></label>
                                    <div class="col-sm-8">
                                          @Html.DisplayFor(C => C.EntryType)<br>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">

                                    <label for="inputName3" class="col-sm-4 control-label">Prod Qty<label class="mandatory"> *</label></label>
                                    <div class="col-sm-8">
                                          @Html.DisplayFor(C => C.EntryType)<br>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                               <div class="col-md-6">
                                <div class="form-group">

                                    <label for="inputName3" class="col-sm-4 control-label">Start Date / Time<label class="mandatory"> </label></label>
                                    <div class="col-sm-8">
                                          @Html.DisplayFor(C => C.startdate)<br>
                                    </div>
                                </div>
                            </div>
                             <div class="col-md-6">
                                <div class="form-group">

                                    <label for="inputName3" class="col-sm-4 control-label">End Date / Time<label class="mandatory"></label></label>
                                    <div class="col-sm-8">
                                          @Html.DisplayFor(C => C.enddate)<br>
                                    </div>
                                </div>
                            </div>
                           
                        </div>
                     
                      
                        <div style="height:30px;"></div>
                      
                          <div class="row">
                            <div class="col-md-12">

                                <div class="tabs-container">
                                    <ul class="nav nav-tabs">
                                        <li class="active" id="liinp"><a href="#tab-1" data-toggle="tab" id="ainp">Input Detail</a></li>
                                        <li id="liinpC"> <a href="#tab-2" data-toggle="tab" id="ainpc">Consumables </a></li>
                                        <li id="liout"><a href="#tab-3" data-toggle="tab" id="aout">Output Details </a></li>
                                          <li id="lioutW"><a href="#tab-4" data-toggle="tab" id="aoutw">Wastage Details </a></li>
                                    </ul>
                                    <div class="tab-content">
                                        <div class="tab-pane active" id="tab-1">
                                            <!-- 1st tab  -->
                                         
                                                  <div class="row">
           <div class="col-md-12" style="overflow-x:scroll; min-width:300px; min-height:200px;">
                                               
                                                                    <table class="table table-striped table-hover" id="dataTable">
                                                                        <thead>
                                                                            <tr>
                                                                                <th>Item ID</th>
                                                                                <th>Bin ID</th>
                                                                                <th> Drum No </th>
                                                                                <th> Batch No </th>
                                                                                <th> Batch Qty </th>
                                                                                <th> Stock </th>
                                                                                <th> Issue Qty </th>
                                                                                <th> Mill Load Addition </th>
                                                                                <th> Output Y/N </th>
                                                                               
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody id="tbBooks">
                                                                            @{

                                                            int i = 0;
                                                            foreach (var item in Model.inputlst.ToList())
                                                            {
                                                                                                                                                
                                                            <tr id="trBook@(i)" class="chkitemlst" style="height: 30px;border-bottom: 1px dashed #ddd;">
                                                                                                                                                        
                                                                <td>
                                                                                                    @Html.DisplayFor(o => o.inputlst[i].ItemId) @Html.HiddenFor(o => o.inputlst[i].Proinid)@Html.HiddenFor(o => o.inputlst[i].saveitemId, new { @id = "hdItemid" + i})
                                                                                                                                                                                                    </td>
                                                                                                                                                            <td>@Html.DisplayFor(o => o.inputlst[i].BinId)</td> 
                                                                                                                                                                   <td>@Html.DisplayFor(o => o.inputlst[i].drumno) @Html.HiddenFor(o => o.inputlst[i].drumno) @Html.HiddenFor(o => o.inputlst[i].drumid)
                                                                                                                                                              </td>
                                                                                                                                                             <td>@Html.DisplayFor(o => o.inputlst[i].batchno) @Html.HiddenFor(o => o.inputlst[i].batchno)</td> 
                                                                                                                                                            <td> @Html.DisplayFor(o => o.inputlst[i].batchqty) @Html.HiddenFor(o => o.inputlst[i].batchqty)</td>
                                                                                                                                                            <td>@Html.DisplayFor(o => o.inputlst[i].StockAvailable)</td>
                                                                                                                                                            <td>@Html.DisplayFor(o => o.inputlst[i].IssueQty ) @Html.HiddenFor(o => o.inputlst[i].IssueQty) @Html.HiddenFor(o => o.inputlst[i].totalqty)</td>
                                                                                                                                                            <td>@Html.DisplayFor(o => o.inputlst[i].MillLoadAdd)</td>
                                                                                                                                                            <td> @Html.DisplayFor(o => o.inputlst[i].Output)</td>                                                                                                                              
                                                                                                                                                            
</tr>
                                                          i = i + 1;
                                                            }
                                                        }
                                                                        </tbody>
                                                                    </table>
                                                              
</div>
                                        </div> 
                                           
                                            <!-- 1st tab  -->
                                        </div>
                                        <div class="tab-pane" id="tab-2">
                                            <!-- 2nd tab  -->
                                            <div class="row">
                                             
                                                    <div class="col-md-12" style="overflow-x:scroll; min-width:300px; min-height:200px;">
                                                                    <table class="table table-striped table-hover" id="dataTableinc">
                                                                        <thead>
                                                                            <tr>
                                                                                <th>Item Id</th>
                                                                                <th> Unit </th>
                                                                                <th> Bin Id </th>
                                                                                <th> Stock </th>
                                                                                <th>Cons.Qty  </th>
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody id="tbBooksinc">
                                                                              @{

                                                            int j = 0;
                                                            foreach (var item in Model.inconslst.ToList())
                                                            {
                                                                                                                                                      <tr id="trBookinc@(j)" class="chkitemlstinc" style="height: 30px;border-bottom: 1px dashed #ddd;">
                                                                                                                                                        
                                                                                                                                                                                                    <td>
                                                                                                                                                                                                        @Html.DisplayFor(o => o.inconslst[j].ItemId)
                                                                                                                                                                                                    </td>
                                                                                                                                                                                                    <td>@Html.DisplayFor(o => o.inconslst[j].consunit)</td> 
                                                                                                                                                            <td>@Html.DisplayFor(o => o.inconslst[j].BinId)</td> 
                                                                                                                                                            <td>@Html.DisplayFor(o => o.inconslst[j].ConsStock)</td>
                                                                                                                                                            <td>@Html.DisplayFor(o => o.inconslst[j].consQty)</td>
                                                                                                                                                           
                                                                                                                                                             


                                                                                                                                                        </tr>
                                                      
                                                          j = j + 1;
                                                            }
                                                        }
                                                                        </tbody>
                                                                    </table>
                                                                </div>
                                                        
                                               
                                            </div>
                                            <!-- 2nd tab  -->
                                        </div>
                                        <div class="tab-pane" id="tab-3">
                                            <!-- 3rd tab  -->
                                            <div class="row">
                                                

                                                <div class="col-lg-12" style="overflow-x:scroll; min-width:300px; min-height:200px;">
                                                    
                                                                    <table class="table table-striped table-hover" id="dataTableOut">
                                                                        <thead>
                                                                            <tr>
                                                                                <th>Output Item ID</th>
                                                                                <th>Start Date</th>
                                                                                <th> Start Time </th>
                                                                                <th> End Date </th>
                                                                                <th> End Time</th>
                                                                                <th> Drum No</th>
                                                                                <th> Batch No </th>
                                                                                <th> Stock</th>
                                                                                <th> Output Qty </th>
                                                                                 <th> Excess Qty </th>
                                                                                  <th> Status </th>
                                                                                   <th> To Location </th>
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody id="tbBooksout">
                                                                             @{

                                                            int k = 0;
                                                            foreach (var item in Model.outlst.ToList())
                                                            {
                                                                                                                                                      <tr id="trBookout@(k)" class="chkitemlstout" style="height: 30px;border-bottom: 1px dashed #ddd;">
                                                                                                                                                        
                                                                                                                                                                                                    <td>
                                                                                                                                                                                                        @Html.DisplayFor(o => o.outlst[k].ItemId)
                                                                                                                                                                                                    </td>@Html.HiddenFor(o => o.outlst[k].saveitemId) @Html.HiddenFor(o => o.outlst[k].outid) @Html.HiddenFor(o => o.outlst[k].drumid)@Html.HiddenFor(o => o.outlst[k].locid)
                                                                                                                                                                                                     <td>@Html.DisplayFor(o => o.outlst[k].startdate)</td>
                                                                                                                                                                                                   
                                                                                                                                     <td>@Html.DisplayFor(o => o.outlst[k].starttime)</td>
                                                                                                                                      <td>@Html.DisplayFor(o => o.outlst[k].enddate)</td>
                                                                                                                                    
                                                                                                                                     <td>@Html.DisplayFor(o => o.outlst[k].endtime)</td>
                                                                                                <td>
                                                                                                    @Html.DisplayFor(o => o.outlst[k].drumno) @Html.HiddenFor(o => o.outlst[k].drumno)
                                                                                                                                                              </td>
                                                                                                                                    <td>@Html.DisplayFor(o => o.outlst[k].batchno) @Html.HiddenFor(o => o.outlst[k].batchno)</td> 
                                                                                                                                                            <td>@Html.DisplayFor(o => o.outlst[k].OutStock)</td>
                                                                                                                                                            <td>@Html.DisplayFor(o => o.outlst[k].OutQty) @Html.HiddenFor(o => o.outlst[k].OutQty)</td>
                                                                                                                                                           <td>@Html.DisplayFor(o => o.outlst[k].ExcessQty)</td>
                                                                                                                                                               <td>@Html.DisplayFor(o => o.outlst[k].status)</td>
                                                                                                                                                                <td>@Html.DisplayFor(o => o.outlst[k].toloc)</td>
                                                                                                                                                         


                                                                                                                                                        </tr>
                                                      
                                                          k = k + 1;
                                                            }
                                                        }
                                                                        </tbody>
                                                                    </table>
                                                               
                                                </div>
                                            </div>
                                            <!-- 3rd tab  -->
                                        </div>
                                         <div class="tab-pane" id="tab-4">
                                            <!-- 4th tab  -->
                                            <div class="row">
                                               

                                                <div class="col-lg-12" style="overflow-x:scroll; min-width:300px; min-height:200px;">
                                                    
                                                                    <table class="table table-striped table-hover" id="dataTableOutw">
                                                                        <thead>
                                                                            <tr>
                                                                                <th>Wastage Item </th>
                                                                                <th>Batch No</th>
                                                                                <th> Wastage Qty </th>
                                                                                <th> Wastage Location </th>
                                                                                <th>Bin Id  </th>
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody id="tbBooksoutw">
                                                                                    @{

                                                            int m = 0;
                                                            foreach (var item in Model.wastelst.ToList())
                                                            {
                                                                                                                                                      <tr id="trBookinc@(m)" class="chkitemlstinc" style="height: 30px;border-bottom: 1px dashed #ddd;">
                                                                                                                                                        
                                                                                                                                                                                                    <td>
                                                                                                                                                                                                        @Html.DisplayFor(o => o.wastelst[m].ItemId)
                                                                                                                                                                                                    </td>@Html.HiddenFor(o => o.wastelst[m].saveitemId) @Html.HiddenFor(o => o.wastelst[m].wasteid)@Html.HiddenFor(o => o.wastelst[m].locid)
                                                                                                                                                                                                    <td>@Html.DisplayFor(o => o.wastelst[m].batchno)</td> 
                                                                                                                                                            <td>@Html.DisplayFor(o => o.wastelst[m].wastageQty) @Html.HiddenFor(o => o.wastelst[m].wastageQty)</td>
                                                                                                                                                            <td>@Html.DisplayFor(o => o.wastelst[m].toloc)</td>
                                                                                                                                                            <td>@Html.DisplayFor(o => o.wastelst[m].BinId)</td>
                                                                                                                                                               


                                                                                                                                                        </tr>
                                                      
                                                          m = m + 1;
                                                            }
                                                        }
                                                                        </tbody>
                                                                    </table>
                                                       
                                                </div>
                                            </div>
                                            <!-- 4th tab  -->
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>

                        <div style="height:30px;"></div>

                           <div class="row">
                      
                            <div class="col-md-6">
                                <div class="form-group">

                                    <label for="inputName3" class="col-sm-4 control-label">Total Input Qty<label class="Mandatory"></label></label>
                                    <div class="col-sm-8">
                                        @Html.DisplayFor(C => C.totalinqty)<br />
                                    </div>
                                </div>
                            </div>
                              <div class="col-md-6">
                                <div class="form-group">

                                    <label for="inputName3" class="col-sm-4 control-label">Total Cons Qty<label class="Mandatory"></label></label>
                                    <div class="col-sm-8">
                                        @Html.DisplayFor(C => C.totalconsqty)<br />
                                    </div>
                                </div>
                            </div>
                        </div>
                           <div class="row">
                          

                            <div class="col-md-6">
                                <div class="form-group">

                                    <label for="inputName3" class="col-sm-4 control-label">Total Output Qty<label class="Mandatory"></label></label>
                                    <div class="col-sm-8">
                                        @Html.DisplayFor(C => C.totaloutqty)<br />
                                    </div>
                                </div>
                            </div>
                               <div class="col-md-6">
                                <div class="form-group">

                                    <label for="inputName3" class="col-sm-4 control-label">Total Waste<label class="Mandatory"></label></label>
                                    <div class="col-sm-8">
                                        @Html.DisplayFor(C => C.wastageqty)<br />
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">

                                    <label for="inputName3" class="col-sm-4 control-label">Total RM Value<label class="Mandatory"></label></label>
                                    <div class="col-sm-8">
                                            @Html.DisplayFor(C => C.totalRmValue)<br />

                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="inputName3" class="col-sm-4 control-label">Machine Value<label class="Mandatory"></label></label>

                                    <div class="col-sm-8">
                                                                              @Html.DisplayFor(C => C.Machine)<br />

                                    </div>

                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">

                                    <label for="inputName3" class="col-sm-4 control-label">Cons.Value<label class="Mandatory"></label></label>
                                    <div class="col-sm-8">
                                                                               @Html.DisplayFor(C => C.CosValue)<br />

                                    </div>
                                </div>
                            </div>
                        <div class="col-md-6">
                                <div class="form-group">

                                    <label for="inputName3" class="col-sm-4 control-label">Total RM Qty<label class="Mandatory"></label></label>
                                    <div class="col-sm-8">
                                                                              @Html.DisplayFor(C => C.totaRmqty)<br />

                                    </div>
                                </div>
                            </div>
                           
                        </div>
                       
                        
         
                       
                        <div style="height:30px;"></div>
                          <button type="submit" class="btn aqua m-t-xs bottom15-xs" id="btnSave">Submit</button>
                        <button class="btn btn-danger" type="button" causesvalidation="false" onclick="location.href='@Url.Action("ListProductionEntry", "ProductionEntry")'">Cancel</button>
                    </form>
                    }
                </div>
            </div>
        </div>

    </div>
</div>
<script>
   $(function() {
       var entry = '@ViewBag.entrytype';
                changeentry(entry);
            function changeentry(typeid){
                if(typeid=="INPUT"){
                    document.getElementById("ainp").click();
                    @*window.location.href = href*@
                    document.getElementById("liinp").style.display = "block";
                    document.getElementById("liinpC").style.display = "block";
                     document.getElementById("liout").style.display = "none";
                    document.getElementById("lioutW").style.display = "none";
                }
                else if (typeid == "OUTPUT") {
                     document.getElementById("aout").click();;
                  @*  window.location.href = href*@
                     document.getElementById("liinp").style.display = "none";
                    document.getElementById("liinpC").style.display = "none";
                     document.getElementById("liout").style.display = "block";   
                    document.getElementById("lioutW").style.display = "block";
                }
                else{
                     document.getElementById("ainp").click();
                    @*window.location.href = href*@
                     document.getElementById("liinp").style.display = "block";
                    document.getElementById("liinpC").style.display = "block";
                     document.getElementById("liout").style.display = "block";
                    document.getElementById("lioutW").style.display = "block";
                }
            }
             var shift = '@ViewBag.shift';
                changeshift(shift);
       function changeshift(Shiftid) {
           $.ajax({
               url: 'GetshiftDetail',
               data: { "Shiftid": Shiftid },
               type: "GET",
               success: function(result) {
                   document.getElementById("shiftdetails").innerHTML = result.fromtime + " to " + result.totime + "  Total Hours : " + result.tothrs;
               },
               error: function() {
                   alert("Data Not Found");
               }
           });
       }
  });
</script>