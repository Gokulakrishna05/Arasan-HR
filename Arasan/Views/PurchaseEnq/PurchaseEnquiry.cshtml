@model Arasan.Models.PurchaseEnquiry
@{
    ViewData["Title"] = "  Purchase Enquiry";
}
   <div class="row wrapper border-bottom page-heading">
      <div class="col-lg-12">

        <ol class="breadcrumb">
          <li> <a href="#">Home</a> </li>
          <li> <a>Purchase</a> </li>
          <li class="active"> <strong> Purchase Enquiry </strong> </li>
        </ol>
      </div>
    </div>
      <div class="wrapper-content ">
        <div class="row">
         <div class="col-lg-12">
          <div class="ibox float-e-margins">
            <div class="widgets-container">
           @*   <h5 style="font-size:14px">Purchase Enquiry</h5>*@
              <hr>
              <form>
			  <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                            
                                                <label for="inputName3" class="col-sm-4 control-label">Branch<label class="Mandatory"></label></label>
                                                <div class="col-sm-8">
                                                
                        @Html.DropDownListFor(C => C.Branch, Model.Brlst, new { @id = "ddlBranch", @Class = "form-control chosen-select", @TabIndex = 1 })
                       
                              </div>
                                            </div>
                                        </div>
                                         <div class="col-md-6">
                                            <div class="form-group">
                                            
                                                <label for="inputName3" class="col-sm-4 control-label">Supplier Name<label class="Mandatory"></label></label>
                                                <div class="col-sm-8">
                                                   @Html.DropDownListFor(C => C.Supplier, Model.Suplst, new { @id = "ddlSupplier", @Class = "form-control chosen-select", @TabIndex = 1 })
                                                    
                                                 
                                                </div>
                                            </div>
                                        </div>
                                    </div>
									
									<div style="height:30px;"></div>
									 <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                            
                                                <label for="inputName3" class="col-sm-4 control-label">Enquiry No.<label class="Mandatory"></label></label>
                                                <div class="col-sm-8">
                                                    <input class="form-control" id="inputEmail3" placeholder="PENQ100002" type="text" readonly>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label for="inputName3" class="col-sm-4 control-label">Enquiry Date<label class="Mandatory"></label></label>
                                              
                                                   
													<div class="input-group date form_date col-sm-8" data-date="" data-date-format="dd MM yyyy" data-link-field="dtp_input2"
														data-link-format="yyyy-mm-dd">
														<input class="form-control" size="32" type="text" value="" readonly>
														<span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span> <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
													</div>
													<input type="hidden" id="dtp_input2" value="" />
													<br/>
												
                                               
                                            </div>
                                        </div>
                                    </div>
               <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                            
                                                <label for="inputName3" class="col-sm-4 control-label">Currency<label class="Mandatory"></label></label>
                                                <div class="col-sm-8">
                                                   @Html.DropDownListFor(C => C.Currency, Model.Curlst, new { @id = "ddlCurrency", @Class = "form-control chosen-select", @TabIndex = 1 })
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label for="inputName3" class="col-sm-4 control-label">Exchange Rate<label class="Mandatory"></label></label>
                                              
                                                      <div class="col-sm-8">
												  <input class="form-control" id="inputEmail3" placeholder="1.00" type="text">
												</div>
                                               
                                            </div>
                                        </div>
                                    </div>
									<div style="height:30px;"></div>
									 <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                            
                                                <label for="inputName3" class="col-sm-4 control-label">Enquiry Ref<label class="Mandatory"></label></label>
                                                <div class="col-sm-8">
                                                    <input class="form-control" id="inputEmail3" placeholder="Enquiry Ref" type="text">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label for="inputName3" class="col-sm-4 control-label">Party Ref. No.<label class="Mandatory"></label></label>
                                              
                                                      <div class="col-sm-8">
												  <input class="form-control" id="inputEmail3" placeholder="Party Ref. No." type="text">
												</div>
                                               
                                            </div>
                                        </div>
                                    </div>
									
									 <div style="height:30px;"></div>
			 <div class="row">
			 <div class="col-md-12">
                        <div class="btn-group">
                          <button class="btn sbold green" onclick="AddRow()" id="addRow"> Add New <i class="fa fa-plus"></i> </button>
                        </div>
                      </div>
			 
          <div class="col-lg-12">
            <div class="ibox float-e-margins">
             
              <!-- / ibox-title -->
              <div id="demo3" class="ibox-content collapse in">
                <div class="borderedTable">
                  <div class="table-scrollable">
                    <table class="table table-striped table-hover">
                      <thead>
                        <tr>
                          <th> S. No. </th>
                          <th>Item </th>
                          <th>Description</th>
                          <th> Unit </th>
                          <th> Conv. Factor </th>
						  <th> Quantity </th>
                            <th> Unit (Primary) </th>
                           <th> Quantity (Primary)</th>
                           <th> Rate </th>
                          <th> Amount </th>
                        </tr>
                      </thead>
                      <tbody id="tbBooks">
                                                        @{

                                                            int i = 0;
                                                            int j = 1;
                                                            foreach (var item in Model.EnqLst.ToList())
                                                            {
                                                                <tr id="trBook@(i)" class="chkitemlst" style="height: 30px;border-bottom: 1px dashed #ddd;">
                                                                <td> @j </td>
                                                            <td>
                                                                @Html.DropDownListFor(o => o.EnqLst[i].ItemId, Model.EnqLst[i].Itemlst, "Please Select", new { @class = "form-control chosen-select newcss", @id = "ddlItem" + i, style = "width: 170px;" })
                                                            </td>
                                                             <td>
                                                                @Html.TextBoxFor(o => o.EnqLst[i].Desc, new { @id = "txtDesc" + i, @class = "form-control", style = "width: 100px;" })
                                                            </td>
                                                             <td>
                                                                @Html.TextBoxFor(o => o.EnqLst[i].Unit, new { @id = "txtUnit" + i, @class = "form-control", style = "width: 100px;" })
                                                            </td>
                                                             <td>
                                                                @Html.TextBoxFor(o => o.EnqLst[i].Conversionfactor, new { @id = "txtConversionfactor" + i, @class = "form-control", style = "width: 100px;" })
                                                            </td>
                                                             <td>
                                                                @Html.TextBoxFor(o => o.EnqLst[i].Quantity, new { @id = "txtQuantity" + i, @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 100px;text-align:right"})
                                                            </td>
                                                             <td>
                                                                @Html.TextBoxFor(o => o.EnqLst[i].unitprim, new { @id = "txtunitprim" + i, @class = "form-control", style = "width: 100px;" })
                                                            </td>
                                                             <td>
                                                                @Html.TextBoxFor(o => o.EnqLst[i].QtyPrim, new { @id = "txtQtyPrim" + i, @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 100px;text-align:right"})
                                                            </td>
                                                             <td>
                                                                @Html.TextBoxFor(o => o.EnqLst[i].rate, new { @id = "txtrate" + i, @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 100px;text-align:right"})
                                                            </td>
                                                             <td>
                                                                @Html.TextBoxFor(o => o.EnqLst[i].Amount, new { @id = "txtAmount" + i, @class = "form-control", onkeydown = "return isNumeric2(event.keyCode,this.value)", style = "width: 100px;text-align:right"})
                                                            </td>
                                                            </tr>
                                                             i = i + 1;
                                                             j = j + 1;
                                                            }
                                                        }




                   
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
		<div style="height:30px;"></div>
									 <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                            
                                                <label for="inputName3" class="col-sm-4 control-label">Gross<label class="Mandatory"></label></label>
                                                <div class="col-sm-8">
                                                    <input class="form-control" id="inputEmail3" placeholder="0.00" type="text">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label for="inputName3" class="col-sm-4 control-label">Net<label class="Mandatory"></label></label>
                                              
                                                      <div class="col-sm-8">
												  <input class="form-control" id="inputEmail3" placeholder="0.00" type="text">
												</div>
                                               
                                            </div>
                                        </div>
                                    </div>
									
									
									<div style="height:30px;"></div>
									 <div class="row">
                                        <div class="col-md-12">
                                            <div class="form-group">
                                            
                                                <label for="inputName3" class="col-sm-2 control-label">Amount In Words<label class="Mandatory"></label></label>
                                                <div class="col-sm-10">
                                                    <input class="form-control" id="inputEmail3" placeholder="" type="text">
                                                </div>
                                            </div>
                                        </div>
                                       
                                    </div>
									 <div style="height:30px;"></div>
									 <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                            
                                                <label for="inputName3" class="col-sm-4 control-label">Enquiry Recieved By<label class="Mandatory"></label></label>
                                                <div class="col-sm-8">
                                                     <select class=" _select js-states form-control">
                       
                       
                        <option value="Anitha">Anitha </option>
                        <option value="Ramesh">Ramesh </option>
                      </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label for="inputName3" class="col-sm-4 control-label">Assign To<label class="Mandatory"></label></label>
                                              
                                                      <div class="col-sm-8">
												 <select class=" _select js-states form-control">
                       
                       
                        <option value="Anitha">Anitha </option>
                        <option value="Ramesh">Ramesh </option>
                      </select>
												</div>
                                               
                                            </div>
                                        </div>
                                    </div>
								
								
									<div style="height:30px;"></div>
                <button type="submit" class="btn aqua m-t-xs bottom15-xs">Submit</button>
				 <button class="btn btn-danger" type="submit">Cancel</button>
              </form>
            </div>
          </div>
        </div>
         
        </div>
      </div>
     <script>
         function AddRow() {
        var opt = "";
        $.ajax({
            type: "POST",
            url: 'GetItemJSON',
            success: function (data) {
                $.each(data, function () {
                    opt += "<option value=" + this.Value + ">" + this.Text + "</option>";
                });
                AppendRow(opt);
            }
        })



    }
         function AppendRow(opt) {
        var index = $("#tbBooks").children("tr").length;

        var Item = "<td><select style = 'width: 170px;' class='form-control chosen-select newcss' id='ddlItem" + index + "' name='EnqLst[" + index + "].ItemId' ><option value=''>Please select</option>" + opt + "</select></td>";

        var Desc = "<td><input class='form-control' id='txtDesc" + index + "' name='EnqLst[" + index + "].Desc'  style='width: 100px;' type='text'  /></td>";

        var Unit = "<td><input class='form-control' id='txtUnit" + index + "' name='EnqLst[" + index + "].Unit'  style='width: 100px;' type='text'  /></td>";

        var Conversionfactor = "<td><input class='form-control' id='txtConversionfactor" + index + "' name='EnqLst[" + index + "].Conversionfactor'  style='width: 100px;' type='text'  /></td>";

        var Quantity = "<td><input class='form-control' id='txtQuantity" + index + "' name='EnqLst[" + index + "].Quantity'  onkeydown='return isNumeric2(event.keyCode,this.value)' style='width: 100px;text-align:right' type='text' value='0'  /></td>";

       var unitprim = "<td><input class='form-control' id='txtunitprim" + index + "' name='EnqLst[" + index + "].unitprim'  style='width: 100px;' type='text'  /></td>";

        var QtyPrim = "<td><input class='form-control' id='txtQtyPrim" + index + "' name='EnqLst[" + index + "].QtyPrim'  onkeydown='return isNumeric2(event.keyCode,this.value)' style='width: 100px;text-align:right' type='text' value='0'  /></td>";

        var removeCell = "<td><input id='Isvalid" + index + "' name='EnqLst[" + index + "].Isvalid' type='hidden' value='Y'><img  src='../Images/delete.png' onclick='removeRow(" + index + ");'  style='cursor:pointer' /><input name='EnqLst.Index' type='hidden' value='" + index + "'  /></td>";
       

        var newRow = "<tr class='chkitemlst'  style='height: 30px;border-bottom: 1px dashed #ddd;'  id='trBook" + index + "'>" + Item + Desc +  Unit + Conversionfactor + Quantity + unitprim + QtyPrim + TotalPrice + Disc  + Hsn + remarks + removeCell + "</tr>";
        //alert(Packing);
        $("#tbBooks").append(newRow);

        $(".chosen-select").chosen();
    }
     </script> 